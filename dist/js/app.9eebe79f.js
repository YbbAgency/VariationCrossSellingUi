(function(e){function t(t){for(var r,n,l=t[0],o=t[1],c=t[2],u=0,m=[];u<l.length;u++)n=l[u],Object.prototype.hasOwnProperty.call(s,n)&&s[n]&&m.push(s[n][0]),s[n]=0;for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r]);d&&d(t);while(m.length)m.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],r=!0,l=1;l<a.length;l++){var o=a[l];0!==s[o]&&(r=!1)}r&&(i.splice(t--,1),e=n(n.s=a[0]))}return e}var r={},s={app:0},i=[];function n(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=r,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],o=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var d=o;i.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("2b0e"),s=a("bc3a"),i=a.n(s),n=a("130e"),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[[1==e.componentLoading?a("v-overlay",{staticStyle:{opacity:"0.5","z-index":"9999999"}},[a("div",{staticClass:"text-center"},[a("v-progress-circular",{attrs:{color:"primary",indeterminate:"",size:70,width:5}}),a("h3",{staticStyle:{color:"black"}},[e._v(e._s(e.componentLoadingMessage))])],1)]):e._e()],a("v-navigation-drawer",{attrs:{app:"","mini-variant":e.mini},on:{"update:miniVariant":function(t){e.mini=t},"update:mini-variant":function(t){e.mini=t}}},[a("div",{staticClass:"border-bottom toggleButton",staticStyle:{"line-height":"41px"}},[a("v-btn",{attrs:{fab:"","x-small":"",icon:""},on:{click:function(t){return e.goMiniOrMax()}}},[a("v-icon",[e._v(" mdi-menu ")])],1)],1),e._l(e.treeItems,(function(e){return a("div",{key:e.name,staticClass:"border-bottom"},[a("ul",{staticClass:"plenty-treeview"},[e.hasOwnProperty("children")?[a("TreeItem",{attrs:{items:e,"has-child":!0}})]:[a("TreeItem",{attrs:{items:e}})]],2)])}))],2),a("v-main",[a("router-view")],1)],2)},o=[],c=(a("b0c0"),a("d3b7"),a("ddb0"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("li",{class:{open:e.open}},[a("div",{staticClass:"d-flex"},[a("div",{staticClass:"d-flex flex-fill",on:{click:function(t){return e.openOrGoTo(e.items,e.items.cart_hash)}}},[a("v-icon",{staticClass:"tree-icon",attrs:{small:""}},[e._v(" mdi-"+e._s(e.items.icon)+" ")]),a("span",{staticClass:"flex-fill"},[e._v(e._s(e.items.name))])],1),e.items.hasOwnProperty("children")?[a("v-icon",{staticClass:"tree-icon nomini",on:{click:function(t){return e.closeTree(e.items)}}},[e._v(" mdi-chevron-left ")])]:e._e()],2),e.items.hasOwnProperty("children")?[a("ul",e._l(e.items.children,(function(e,t){return a("TreeItem",{key:t,attrs:{items:e}})})),1)]:e._e()],2)])}),d=[],u={name:"TreeItem",props:["items"],data:function(){return{open:!1}},methods:{closeTree:function(){1==this.open&&(this.open=!1)},openOrGoTo:function(e,t){e.url&&this.$router.currentRoute.path!=e.url&&this.$router.push(e.url),t&&this.$router.currentRoute.path!="/cart/"+t&&this.$router.push({path:"/cart/"+t}),0==this.open&&(this.open=!0)}},computed:{openCart:function(){return this.$store.state}}},m=u,v=a("2877"),h=a("6544"),p=a.n(h),f=a("132d"),g=Object(v["a"])(m,c,d,!1,null,null,null),b=g.exports;p()(g,{VIcon:f["a"]});var S={name:"App",components:{TreeItem:b},data:function(){return{mini:!1}},created:function(){this.getInitialData()},methods:{goMiniOrMax:function(){this.mini?this.mini=!1:this.mini=!0},setCurrentActive:function(e){for(var t=0;t<this.treeItems.length;t++)this.treeItems[t].active=!1;for(var a=0;a<this.treeItems.length;a++)this.treeItems[a].highlight==e.name&&(this.treeItems[a].active=!0)},getInitialData:function(){var e=this,t=this;t.$http.get("/rest/variationCrossSeller/getInitialUiData/0").then((function(a){if(a){var r=a.data;t.buildCategoryTreeData(r.categoryTree);for(var s=[],i=0;i<r.tags.length;i++)r.tags[i].text=r.tags[i].tagName,r.tags[i].value=r.tags[i].id,s.push(r.tags[i]);e.$store.commit("tags",s);for(var n={},l=[],o=0;o<r.manufacturer.entries.length;o++)n[r.manufacturer.entries[o].name]=r.manufacturer.entries[o].id,l.push(r.manufacturer.entries[o].name);e.$store.commit("manufacturer",l),e.$store.commit("manufacturerMap",n);for(var c=[],d={},u=0;u<r.webStoreConfig.length;u++)d[r.webStoreConfig[u].name]=r.webStoreConfig[u].storeIdentifier,c.push(r.webStoreConfig[u].name);e.$store.commit("mandantMap",d),e.$store.commit("mandanten",c)}}))["catch"]((function(e){console.log(e)}))},buildCategoryTreeData:function(e){for(var t=[],a=0;a<e.length;a++){var r={};e[a].hasOwnProperty("details")&&e[a].details[0].hasOwnProperty("name")&&(r.name=e[a].details[0].name),e[a].hasOwnProperty("id")&&(r.id=e[a].id),e[a].hasOwnProperty("parentCategoryId")&&(r.parentCategoryId=e[a].parentCategoryId),e[a].hasOwnProperty("childCount")&&e[a].childCount>0&&(r.children=this.buildChildTree(e[a])),t.push(r)}this.$store.commit("categoryTree",t)},buildChildTree:function(e){for(var t=[],a=0;a<e.childCount;a++)if(e.children[a]){var r={children:[]};e.children[a].hasOwnProperty("id")&&(r.id=e.children[a].id),e.children[a].hasOwnProperty("parentCategoryId")&&(r.parentCategoryId=e.children[a].parentCategoryId),e.children[a].hasOwnProperty("details")&&e.children[a].details.length>0&&e.children[a].details[0].name&&(r.name=e.children[a].details[0].name),e.children[a].childCount>0&&(r.children=this.buildChildTree(e.children[a])),t.push(r)}return t}},watch:{$route:function(){this.setCurrentActive(this.$router.currentRoute)}},computed:{componentLoadingMessage:function(){return this.$store.state.componentLoadingMessage},componentLoading:function(){return this.$store.state.componentLoading},treeItems:function(){var e=[{name:"Dashboard",icon:"chart-bar",key:"dashboard",url:"/",active:!0}];return e}}},y=S,x=a("7496"),w=a("8336"),k=a("f6c4"),C=a("f774"),I=a("a797"),_=a("490a"),V=Object(v["a"])(y,l,o,!1,null,null,null),P=V.exports;p()(V,{VApp:x["a"],VBtn:w["a"],VIcon:f["a"],VMain:k["a"],VNavigationDrawer:C["a"],VOverlay:I["a"],VProgressCircular:_["a"]});var F=a("8c4f"),$=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-main",{staticClass:"pa-0"},[a("v-toolbar",{attrs:{height:"41px"}},[a("plenty-input-search",{staticStyle:{height:"32px"},attrs:{search:e.searchSelect,filter:e.searchFilterInputSearch,actions:e.actions},on:{filterupdate:function(t){return e.filterUpdaten(t)},searchselect:function(t){return e.searchSelectUpdate(t)}}}),a("div",{staticClass:"d-flex flex-fill",staticStyle:{"justify-content":"end"}},[a("v-btn",{attrs:{color:"success"},on:{click:function(t){e.$store.commit("searchingFor","var"),e.$router.push({path:"/search"})}}},[e._v(" Neue Verknüpfung anlegen ")])],1)],1),a("v-container",{attrs:{fluid:""}},[a("div",{staticClass:"mt-1 pa-3",staticStyle:{background:"#fff"}},[a("v-row",{staticClass:"h-100 elevation-2"},[a("v-col",{attrs:{cols:"12"}},[a("v-data-table",{attrs:{loading:e.loading.dashboardSearch,headers:e.searchResultHeader,items:e.dashboardCrossSeller,"footer-props":{"items-per-page-options":[15,50,100]},"sort-desc":e.options.orderDesc,options:e.options,"server-items-length":e.totalCrossSeller,"item-key":"cartId","items-per-page":15},on:{"click:row":function(t){return e.setNewVariant(t)},"update:options":function(t){return e.updateData(t)}},scopedSlots:e._u([{key:"item.image",fn:function(e){var t=e.item;return[a("v-avatar",[a("img",{staticClass:"img-fluid",staticStyle:{height:"75px"},attrs:{src:t.image}})])]}}])})],1)],1)],1)])],1),a("v-snackbar",{attrs:{top:"",right:"",elevation:"15",color:e.alerts.dashboardSearch.type,timeout:3e3},model:{value:e.alerts.dashboardSearch.isActive,callback:function(t){e.$set(e.alerts.dashboardSearch,"isActive",t)},expression:"alerts.dashboardSearch.isActive"}},[e._v(" "+e._s(e.alerts.dashboardSearch.message)+" ")])],1)},A=[],N=a("3835"),M=(a("4de4"),a("0d03"),a("4fad"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"d-flex plenty-input-search"},[a("v-btn",{attrs:{plain:"",small:"",icon:"",tile:""},on:{click:function(t){return e.plainSubmit()}}},[a("v-icon",{attrs:{small:""}},[e._v(" mdi-magnify ")])],1),a("input",{directives:[{name:"model",rawName:"v-model",value:e.searchText,expression:"searchText"}],attrs:{type:"text"},domProps:{value:e.searchText},on:{click:e.open,input:function(t){t.target.composing||(e.searchText=t.target.value)}}}),e.showSub?a("v-list",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.close,expression:"close"}],staticClass:"plentySearchList",staticStyle:{"max-width":"440px","z-index":"999999"},attrs:{dense:"",elevation:"1"}},e._l(e.listSearch,(function(t,r){return a("v-list-item",{key:r,attrs:{link:""},on:{click:function(a){return e.submitSearch(t)}}},[a("v-list-item-title",[e._v(e._s(t.name)+" "+e._s(e.searchText))])],1)})),1):e._e(),a("v-menu",{attrs:{"offset-y":"","close-on-content-click":!1},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,s=t.attrs;return[a("v-btn",e._g(e._b({attrs:{plain:"",small:"",icon:"",tile:""}},"v-btn",s,!1),r),[a("v-icon",{attrs:{small:""}},[e._v(" mdi-tune ")])],1)]}}]),model:{value:e.showMenu,callback:function(t){e.showMenu=t},expression:"showMenu"}},[a("v-card",{staticStyle:{"min-width":"500px","max-width":"500px"}},[a("v-card-text",[a("div",{staticClass:"d-flex flex-wrap"},e._l(e.listFilter,(function(t,r){return a("div",{key:r,staticClass:"flex-fill px-1",class:[t.full?"w-100":"w-50"]},["switch"==t.type?[a("v-switch",{staticClass:"mt-0",attrs:{inset:"",dense:"",label:t.name},model:{value:t.value,callback:function(a){e.$set(t,"value",e._n(a))},expression:"filter.value"}})]:e._e(),"input"==t.type?[a("v-text-field",{attrs:{items:t.items,label:t.name,dense:""},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"filter.value"}})]:e._e(),"select"==t.type?[a("v-select",{attrs:{items:t.items,label:t.name},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"filter.value"}})]:e._e(),"date"==t.type?[a("v-menu",{attrs:{"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:e._u([{key:"activator",fn:function(r){var s=r.on,i=r.attrs;return[a("v-text-field",e._g(e._b({attrs:{label:t.name,"append-icon":"mdi-calendar",dense:""},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"filter.value"}},"v-text-field",i,!1),s))]}}],null,!0)},[a("v-date-picker",{attrs:{"no-title":""},on:{input:function(t){e.menu2=!1}},scopedSlots:e._u([{key:"flat",fn:function(){},proxy:!0}],null,!0),model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"filter.value"}})],1)]:e._e()],2)})),0)]),a("v-divider"),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{text:"",depressed:"",tile:""},on:{click:function(t){return e.resetFilter()}}},[e._v(" Zurücksetzen ")]),a("v-btn",{attrs:{color:"primary",depressed:"",tile:""},on:{click:function(t){return e.submitFilter()}}},[e._v(" Suchen ")])],1)],1)],1)],1)}),O=[],T=(a("e9c4"),a("ac1f"),a("841c"),{name:"plentyInputSearch",props:["filter","search","actions"],data:function(){return{showMenu:!1,ownfilter:[],ownsearch:[],searchOverlay:!0,searchText:"",closeSearch:!1}},created:function(){this.ownfilter=JSON.parse(JSON.stringify(this.filter)),this.ownsearch=JSON.parse(JSON.stringify(this.search))},methods:{open:function(){this.closeSearch=!1},close:function(){this.closeSearch=!0},plainSubmit:function(){""==this.searchText&&this.$emit("filterupdate",this.ownfilter)},submitSearch:function(e){e.value=this.searchText,this.$emit("searchselect",e),this.closeSearch=!0},resetFilter:function(){this.ownfilter=JSON.parse(JSON.stringify(this.filter)),this.ownsearch=JSON.parse(JSON.stringify(this.search)),this.$emit("filterupdate",this.ownfilter),this.showMenu=!1},submitFilter:function(){this.$emit("filterupdate",this.ownfilter),this.showMenu=!1}},watch:{filter:function(e){this.ownfilter=JSON.parse(JSON.stringify(this.filter))},searchText:function(e,t){0==e.length&&t.length>0&&this.resetFilter()}},computed:{listFilter:function(){return this.ownfilter},listSearch:function(){return this.ownsearch},showSub:function(){return""!=this.searchText&&0==this.closeSearch}}}),L=T,D=a("b0af"),j=a("99d9"),E=a("2e4b"),B=a("ce7e"),R=a("8860"),J=a("da13"),H=a("5d23"),U=a("e449"),z=a("b974"),G=a("2fa4"),K=a("b73d"),Z=a("8654"),q=a("269a"),Q=a.n(q),W=a("a293"),X=Object(v["a"])(L,M,O,!1,null,"51a718b6",null),Y=X.exports;p()(X,{VBtn:w["a"],VCard:D["a"],VCardActions:j["a"],VCardText:j["b"],VDatePicker:E["a"],VDivider:B["a"],VIcon:f["a"],VList:R["a"],VListItem:J["a"],VListItemTitle:H["b"],VMenu:U["a"],VSelect:z["a"],VSpacer:G["a"],VSwitch:K["a"],VTextField:Z["a"]}),Q()(X,{ClickOutside:W["a"]});var ee={name:"Main",components:{PlentyInputSearch:Y},data:function(){return{totalCrossSeller:0,searchOptions:{page:1,itemsPerPage:15},options:{page:1,itemsPerPage:15,orderBy:"varId",filter:[]},actions:{focusSearch:!1,focusFilter:!1},searchSelect:[{key:"varId",name:"Varianten Id:",operator:"=",value:""},{key:"itemId",name:"Artikel Id:",operator:"=",value:""},{key:"varNumber",name:"Varianten Nummer:",operator:"=",value:""},{key:"varName",name:"Varianten Name:",operator:"=",value:""}],searchFilterInputSearch:[{key:"manufacturer",name:"Hersteller:",operator:"=",type:"select",items:[]},{key:"client",name:"Mandant:",operator:"LIKE",type:"select",items:[]}],searchResultHeader:[{text:"",sortable:!1,value:"image"},{text:"Varianten-Id",sortable:!0,value:"varId"},{text:"Artikel-Id",sortable:!0,value:"itemId"},{text:"Name",sortable:!1,value:"itemName"},{text:"Hersteller",sortable:!1,value:"manufacturer"}],loading:{dashboard:!0,dashboardSearch:!1},selected:[],dashboardCrossSeller:[],alerts:{dashboardSearch:{message:"",isActive:!1,type:""}}}},watch:{manufacturer:function(){this.searchFilterInputSearch[0].items=this.$store.state.manufacturer},mandanten:function(){this.searchFilterInputSearch[1].items=this.$store.state.mandanten}},methods:{setNewVariant:function(e){this.getCrossSellerById(e.varId)},getCrossSellerById:function(e){var t=this;this.$store.commit("componentLoadingMessage","getting cross seller data"),this.$store.commit("componentLoading",!0);var a=[];t.$http.get("/variationCrossSeller/getCrossSellerForVar/"+e+"/de/").then((function(r){if(r){console.log("crossbyid",r);var s=r.data.selectedVar.data,i="";if(s.images.variation.length>0){var n=s.images.variation[0];""!==n.urlPreview?i=n.urlPreview:""==n.urlSecondPreview?i=n.urlSecondPreview:""==n.urlMiddle&&(i=n.urlMiddle)}else if(s.images.all.length>0){var l=s.images.all[0];""!==l.urlPreview?i=l.urlPreview:""==l.urlSecondPreview?i=l.urlSecondPreview:""==l.urlMiddle&&(i=l.urlMiddle)}var o="";"N / A"!==s.texts.name1?o=s.texts.name1:"N / A"!==s.texts.name2?o=s.texts.name2:"N / A"!==s.texts.name3&&(o=s.texts.name3);var c="";if(!1!==s.filter.hasManufacturer&&(c=s.item.manufacturer.name),t.varId=s.variation.id,t.$store.commit("selectedVariation",{attributes:s.attributes,itemId:s.variation.itemId,varId:s.variation.id,itemName:o,manufacturer:c,image:i,externalId:s.variation.externalId,varNumber:s.variation.number,client:s.ids.clients}),r.data&&r.data.vars.length>0)for(var d=0;d<r.data.vars.length;d++){var u=r.data.vars[d].data,m="";if(u.images.variation.length>0){var v=u.images.variation[0];""!==v.urlPreview?m=v.urlPreview:""==v.urlSecondPreview?m=v.urlSecondPreview:""==v.urlMiddle&&(m=v.urlMiddle)}else if(u.images.all.length>0){var h=u.images.all[0];""!==h.urlPreview?m=h.urlPreview:""==h.urlSecondPreview?m=h.urlSecondPreview:""==h.urlMiddle&&(m=h.urlMiddle)}var p="";"N / A"!==u.texts.name1?p=u.texts.name1:"N / A"!==u.texts.name2?p=u.texts.name2:"N / A"!==u.texts.name3&&(p=u.texts.name3);var f="";!1!==u.filter.hasManufacturer&&(f=u.item.manufacturer.name);var g={itemId:u.variation.itemId,varId:r.data.vars[d].id,itemName:p,manufacturer:f,image:m,position:r.data.vars[d].position,externalId:u.variation.externalId,varNumber:u.variation.number,client:u.ids.clients,attributes:u.attributes};a.push(g)}}console.log(a),t.$store.commit("crossSeller",a),t.$store.commit("componentLoading",!1),t.$router.push({path:"/CrossSeller/"+e})}))["catch"]((function(e){t.$store.commit("componentLoading",!1),console.log(e)}))},updateData:function(e){var t=this;t.options.itemsPerPage=e.itemsPerPage,t.options.page=e.page,t.options.orderBy=e.sortBy[0],t.options.orderDesc=e.sortDesc[0],this.dynamicGet("crossSeller",this.options.itemsPerPage,this.options.page,this.options.orderBy,this.options.orderDesc,this.options.filter)},searchSelectUpdate:function(e){var t=[];t.push(e),this.filterUpdaten(t)},filterUpdaten:function(e){for(var t=[],a=0;a<e.length;a++)if(""!=e[a].value&&null!=e[a].value){var r={where:e[a].key};if("date"==e[a].type?r.value=new Date(e[a].value).getTime()/1e3:r.value=e[a].value,"switch"==e[a].type&&(r.value=1==e[a].value?1:0),Object.prototype.hasOwnProperty.call(e[a],"operator")&&(r.operator=e[a].operator),"client"==e[a].key)for(var s=0,i=Object.entries(this.mandantMap);s<i.length;s++){var n=Object(N["a"])(i[s],2),l=n[0],o=n[1];e[a].value==l&&(r.value="%"+o+"%")}t.push(r)}this.options.filter=t,this.dynamicGet("crossSeller",this.options.itemsPerPage,this.options.page,this.options.orderBy,this.options.orderDesc,this.options.filter)},dynamicGet:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"crossSeller",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"id",s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],i=this,n="/rest/variationCrossSeller/dynamicGet/",l="desc",o={db:e,itemsPerPage:t,page:a,orderBy:r,orderDesc:l,filter:s,getItemData:!0};i.loading.dashboardSearch=!0,i.dashboardCrossSeller=[],i.$http.post(n,o).then((function(e){var t=[];if(e.data&&e.data.dynamicEntries&&e.data.dynamicEntries.entries.length>0){i.totalCrossSeller=e.data.dynamicEntries.itemsTotal;for(var a=0;a<e.data.dynamicEntries.entries.length;a++){var r=e.data.dynamicEntries.entries[a].data,s="";if(r.images.variation.length>0){var n=r.images.variation[0];""!==n.urlPreview?s=n.urlPreview:""==n.urlSecondPreview?s=n.urlSecondPreview:""==n.urlMiddle&&(s=n.urlMiddle)}else if(r.images.all.length>0){var l=r.images.all[0];""!==l.urlPreview?s=l.urlPreview:""==l.urlSecondPreview?s=l.urlSecondPreview:""==l.urlMiddle&&(s=l.urlMiddle)}var o="";"N / A"!==r.texts.name1?o=r.texts.name1:"N / A"!==r.texts.name2?o=r.texts.name2:"N / A"!==r.texts.name3&&(o=r.texts.name3);var c="";!1!==r.filter.hasManufacturer&&(c=r.item.manufacturer.name);var d={attributes:r.attributes,itemId:r.variation.itemId,varId:e.data.dynamicEntries.entries[a].id,itemName:o,manufacturer:c,image:s,externalId:r.variation.externalId,varNumber:r.variation.number,client:r.ids.clients,isSelectable:!0};t.push(d)}}0==t.length&&(i.alerts.dashboardSearch.isActive=!0,i.alerts.dashboardSearch.type="rgb(235, 153, 52)",i.alerts.dashboardSearch.message="Es konnten keine Ergbnisse für die Suche gefunden werden"),i.dashboardCrossSeller=t,i.loading.dashboard=!1,i.loading.dashboardSearch=!1}))["catch"]((function(e){console.log(e),i.loading.dashboardSearch=!1}))}},computed:{mandanten:function(){return this.$store.state.mandanten},manufacturer:function(){return this.$store.state.manufacturer}}},te=ee,ae=a("8212"),re=a("62ad"),se=a("a523"),ie=a("8fea"),ne=a("0fd9"),le=a("2db4"),oe=a("71d9"),ce=Object(v["a"])(te,$,A,!1,null,null,null),de=ce.exports;p()(ce,{VAvatar:ae["a"],VBtn:w["a"],VCol:re["a"],VContainer:se["a"],VDataTable:ie["a"],VMain:k["a"],VRow:ne["a"],VSnackbar:le["a"],VToolbar:oe["a"]});var ue=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-main",{staticClass:"pa-0"},[a("v-toolbar",{attrs:{height:"41px"}}),a("v-row",{staticClass:"mt-1"},[a("v-col",{attrs:{cols:"6"}},[a("v-card",{staticClass:"elevation-2 ml-2"},[a("v-card-title",[a("div",{staticClass:"flex-fill d-flex",staticStyle:{"margin-bottom":"5px"}},[a("v-text-field",{staticClass:"mb-0 pb-0",attrs:{outlined:"",readonly:"",label:"Varianten Id"},on:{click:function(t){e.$store.commit("searchingFor","var"),e.$router.push({path:"/search"})}},model:{value:e.selectedVariation.varId,callback:function(t){e.$set(e.selectedVariation,"varId",t)},expression:"selectedVariation.varId"}}),e.selectedVariation.varId>0?[a("v-btn",{staticClass:"mr-4 mt-2 ml-3",staticStyle:{background:"rgb(241 241 83)",color:"white"},on:{click:function(t){e.$store.commit("searchingFor","var"),e.$router.push({path:"/search"})}}},[a("v-icon",[e._v(" mdi-pencil ")])],1)]:[a("v-btn",{staticClass:"mr-4 mt-2 ml-3",attrs:{color:"success"},on:{click:function(t){e.$store.commit("searchingFor","var"),e.$router.push({path:"/search"})}}},[a("v-icon",[e._v(" mdi-magnify ")])],1)],a("v-btn",{staticClass:"mt-2",attrs:{color:"warning"},on:{click:function(t){e.$store.commit("selectedVariation",{}),e.$store.commit("crossSeller",[])}}},[a("v-icon",[e._v(" mdi-arrow-u-left-bottom ")])],1)],2)]),e.selectedVariation.varId>0?[a("v-card-text",{staticStyle:{padding:"12px!important"}},[a("v-row",{staticClass:"mt-1 pa-3"},[a("v-col",{staticClass:"d-flex",staticStyle:{"align-items":"start"},attrs:{cols:"1"}},[a("v-avatar",{staticStyle:{width:"unset",height:"unset"}},[a("img",{staticClass:"img-fluid",staticStyle:{"max-height":"80px"},attrs:{src:e.selectedVariation.image}})])],1),a("v-col",{attrs:{cols:"11"}},[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("h3",[e._v(e._s(e.selectedVariation.itemName))]),e._v(" Varianten-Id: "),a("b",[e._v(e._s(e.selectedVariation.varId))]),e._v(" / Item-Id: "+e._s(e.selectedVariation.itemId)+" "),e.selectedVariation.varNumber?[e._v(" / Varianten-Nummer: "+e._s(e.selectedVariation.varNumber))]:e._e(),""!==e.selectedVariation.manufacturer?[e._v(" Hersteller : "+e._s(e.selectedVariation.manufacturer)+" ")]:e._e(),e._v("x "),[a("br"),e._v(" Attribute: "),e.selectedVariation.attributes.length>0?a("ul",{staticClass:"list-unstyled list-inline"},e._l(e.selectedVariation.attributes,(function(t){return a("li",{key:e.selectedVariation.varId+"_attr_"+t.value.names.name},[a("span",{staticClass:"font-weight-bold",domProps:{innerHTML:e._s(t.attribute.names.name)}}),e._v(": "),a("span",{domProps:{innerHTML:e._s(t.value.names.name)}})])})),0):e._e()]],2)],1)],1)],1)],1)]:e._e()],2)],1),a("v-col",{attrs:{cols:"6"}},[a("v-card",{staticClass:"elevation-2",staticStyle:{height:"100%"}},[a("v-card-title",[e._v(" Verknüpfte Cross Seller "),a("div",{staticClass:"d-flex align-center"},[a("v-btn",{staticClass:"mr-4 mt-2",staticStyle:{"margin-left":"15px","margin-bottom":"5px"},attrs:{disabled:void 0==e.selectedVariation.varId,color:"success"},on:{click:function(t){e.$store.commit("searchingFor","cross"),e.$router.push({path:"/search"})}}},[a("v-icon",[e._v(" mdi-plus ")])],1),a("v-btn",{staticClass:"mr-4 mt-2",staticStyle:{"margin-left":"15px","margin-bottom":"5px"},attrs:{disabled:e.crossSeller.length<1,color:"error"},on:{click:function(t){e.modal.deleteAll=!0}}},[a("v-icon",[e._v(" mdi-delete-outline ")])],1)],1)]),a("v-card-text",{staticClass:"colorList",staticStyle:{padding:"12px!important"}},[e._l(e.crossSeller,(function(t,r){return[a("v-row",{key:"delete_"+t.varId,staticClass:"mt-1 pa-3 coloredRow"},[e.crossSeller.length>0?[a("v-col",{staticClass:"d-flex ",attrs:{cols:"2"}},[a("div",{staticStyle:{display:"flex","flex-direction":"column","align-items":"center"}},[a("v-btn",{staticClass:"position-btn mb-1",attrs:{disabled:0==e.crossSeller.indexOf(t)},on:{click:function(a){return e.recalcPostitions(t,r-1)}}},[a("v-icon",[e._v(" mdi-arrow-up-circle-outline ")])],1),void 0,a("v-btn",{staticClass:"position-btn",attrs:{disabled:e.crossSeller.indexOf(t)==e.crossSeller.length-1},on:{click:function(a){return e.recalcPostitions(t,r+1)}}},[a("v-icon",[e._v(" mdi-arrow-down-circle-outline ")])],1)],2),a("div",{staticClass:"ml-2 mt-1"},[a("v-text-field",{staticStyle:{width:"64px"},attrs:{type:"number",label:"Position",value:r+1,disabled:e.crossSeller.length<2,rules:[e.rules.notSame,e.rules.greaterZero],loading:e.loading.position},on:{change:function(a){return e.recalcPostitions(t,a-1)}}})],1)])]:e._e(),a("v-col",{staticClass:"d-flex",staticStyle:{"align-items":"start"},attrs:{cols:"1"}},[a("v-avatar",{staticStyle:{width:"unset",height:"unset"}},[a("img",{staticClass:"img-fluid",staticStyle:{"max-height":"80px"},attrs:{src:t.image}})])],1),a("v-col",{attrs:{cols:"7"}},[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("h3",[e._v(e._s(t.itemName))]),e._v(" Varianten-Id: "),a("b",[e._v(e._s(t.varId))]),e._v(" / Item-Id: "+e._s(t.itemId)+" "),t.varNumber?[e._v(" / Varianten-Nummer: "+e._s(t.varNumber))]:e._e(),""!==t.manufacturer?[e._v(" Hersteller : "+e._s(t.manufacturer)+" ")]:e._e(),e._v("x "),[a("br"),e._v(" Attribute: "),t.attributes.length>0?a("ul",{staticClass:"list-unstyled list-inline"},e._l(t.attributes,(function(r,s){return a("li",{key:t.varId+"_attr_"+s},[a("span",{staticClass:"font-weight-bold",domProps:{innerHTML:e._s(r.attribute.names.name)}}),e._v(": "),a("span",{domProps:{innerHTML:e._s(r.value.names.name)}})])})),0):e._e()]],2)],1)],1),a("v-col",{staticClass:"d-flex align-center",attrs:{cols:"1"}},[a("v-btn",{staticClass:"badge-btn",attrs:{color:"error"},on:{click:function(a){return e.deleteCrossSeller([t])}}},[a("v-icon",[e._v(" mdi-delete-outline ")])],1)],1)],2)]}))],2)],1)],1)],1),a("v-dialog",{attrs:{transition:"dialog-top-transition","max-width":"600"},model:{value:e.modal.deleteAll,callback:function(t){e.$set(e.modal,"deleteAll",t)},expression:"modal.deleteAll"}},[a("v-card",[a("v-toolbar",{staticClass:"text-h6",attrs:{color:"error",dark:""}},[e._v(" Alle Verknüpften Cross Seller löschen ")]),a("v-card-text",[a("div",{staticClass:"text-h5 pa-5"},[e._v(" Löscht alle Verknüpfungen für Cross Seller an der Variante: "),a("br"),e._v(" "),a("b",[e._v(e._s(e.selectedVariation.varId)+" - "+e._s(e.selectedVariation.itemName))])])]),a("v-card-actions",{staticClass:"justify-end"},[a("v-btn",{attrs:{color:"error"},on:{click:function(t){e.deleteCrossSeller(e.crossSeller),e.modal.deleteAll=!1}}},[a("v-icon",[e._v(" mdi-delete ")]),e._v(" Löschen ")],1),a("v-btn",{attrs:{color:"primary"},on:{click:function(t){e.modal.deleteAll=!1}}},[e._v(" Abbrechen ")])],1)],1)],1),a("v-snackbar",{attrs:{top:"",right:"",elevation:"15",color:e.alerts.delete.type,timeout:3e3},model:{value:e.alerts.delete.isActive,callback:function(t){e.$set(e.alerts.delete,"isActive",t)},expression:"alerts.delete.isActive"}},[e._v(" "+e._s(e.alerts.delete.message)+" ")]),a("v-snackbar",{attrs:{top:"",right:"",elevation:"15",color:e.alerts.position.type,timeout:3e3},model:{value:e.alerts.position.isActive,callback:function(t){e.$set(e.alerts.position,"isActive",t)},expression:"alerts.position.isActive"}},[e._v(" "+e._s(e.alerts.position.message)+" ")])],1)},me=[],ve=(a("a434"),a("c975"),a("4e827"),{name:"Main",data:function(){return{loading:{position:!1},modal:{deleteAll:!1},rules:{notSame:function(e){return e==e},greaterZero:function(e){return e>0}},alerts:{delete:{message:"",isActive:!1,type:""},position:{message:"",isActive:!1,type:""}}}},methods:{deleteCrossSeller:function(e){for(var t=this,a={deleteFrom:t.selectedVariation.varId,toDelete:[]},r=0;r<e.length;r++)a.toDelete.push(e[r]);for(var s=0;s<this.crossSeller.length;s++)for(var i=0;i<a.toDelete.length;i++)this.crossSeller[s].varId==a.toDelete[i].varId&&this.crossSeller.splice(s,1);t.$http.post("/rest/variationCrossSeller/deleteCrossSeller/",a).then((function(e){e&&(t.alerts["delete"].isActive=!0,t.alerts["delete"].type="success",t.alerts["delete"].message="Cross Seller wurde erfolgreich gelöscht")}))["catch"]((function(e){t.alerts["delete"].isActive=!0,t.alerts["delete"].type="error",t.alerts["delete"].message="Cross Seller konnten nicht gelöscht werden"}))},recalcPostitions:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;if(console.log("pos",t),t>-1){var a=this,r=a.crossSeller.indexOf(e);0==t?(a.crossSeller.splice(r,1),a.crossSeller.unshift(e)):t>a.crossSeller.length-1?(a.crossSeller.splice(r,1),a.crossSeller.push(e)):(a.crossSeller.splice(r,1),a.crossSeller.splice(t,0,e));for(var s={updateOn:a.selectedVariation.varId,toUpdate:[]},i=0;i<a.crossSeller.length;i++)a.crossSeller[i].position=i+1,s.toUpdate.push({varId:a.crossSeller[i].varId,position:a.crossSeller[i].position});a.crossSeller.sort((function(e,t){var a=new Date(e.position),r=new Date(t.position);return a<r?-1:a>r?1:0})),a.$http.post("/rest/variationCrossSeller/updatePosition/",s).then((function(e){e&&(a.alerts.position.type="success",a.alerts.position.message="Die Positions Änderung war erfolgreich",a.alerts.position.isActive=!0)}))["catch"]((function(e){a.alerts.position.type="error",a.alerts.position.message="Die Positions Änderung war NICHT erfolgreich",a.alerts.position.isActive=!0}))}}},computed:{selectedVariation:function(){return this.$store.state.selectedVariation},crossSeller:function(){return this.$store.state.crossSeller}}}),he=ve,pe=a("169a"),fe=Object(v["a"])(he,ue,me,!1,null,null,null),ge=fe.exports;p()(fe,{VAvatar:ae["a"],VBtn:w["a"],VCard:D["a"],VCardActions:j["a"],VCardText:j["b"],VCardTitle:j["c"],VCol:re["a"],VDialog:pe["a"],VIcon:f["a"],VMain:k["a"],VRow:ne["a"],VSnackbar:le["a"],VTextField:Z["a"],VToolbar:oe["a"]});var be=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-main",{staticClass:"pa-0",staticStyle:{background:"#f1f1f1"}},[a("v-toolbar",{attrs:{height:"41px"}},["var"==e.searchingFor?[e._v(" Variante auswählen ")]:[e._v(" Cross Seller auswählen ")]],2),a("v-row",[a("v-col",{staticClass:"mt-5",staticStyle:{background:"white","padding-right":"0"},attrs:{cols:"2"}},[a("div",{staticClass:"d-flex flex-column elevation-1",staticStyle:{width:"100%"}},[a("v-tabs",{attrs:{"fixed-tabs":""},model:{value:e.tabSearch,callback:function(t){e.tabSearch=t},expression:"tabSearch"}},[a("v-tab",[e._v(" Filter ")]),a("v-tab",[e._v(" Kategorie ")])],1),0==e.tabSearch?[a("v-list-item",[a("v-row",[a("v-col",{attrs:{cols:"6"}},[a("v-btn",{staticClass:"w-100",attrs:{color:"primary",disabled:e.loading.search},on:{click:function(t){return e.search()}}},[0==e.loading.search?a("div",[a("v-icon",[e._v(" mdi-magnify ")])],1):a("v-progress-circular",{staticStyle:{width:"24px",height:"24px"},attrs:{indeterminate:""}})],1)],1),a("v-col",{attrs:{cols:"6"}},[a("v-btn",{staticClass:"w-100",staticStyle:{color:"white"},attrs:{color:"orange",disabled:e.loading.search},on:{click:function(t){return e.resetSearch()}}},[0==e.loading.search?a("div",[a("v-icon",[e._v(" mdi-arrow-u-left-top ")])],1):a("v-progress-circular",{staticStyle:{width:"24px",height:"24px"},attrs:{indeterminate:""}})],1)],1)],1)],1),e.searchFilter.categories.length>0?a("v-list-item",[a("v-list-item-title",[a("v-checkbox",{attrs:{label:"Mit Kategorien suchen"},model:{value:e.useCategories,callback:function(t){e.useCategories=t},expression:"useCategories"}})],1)],1):e._e(),a("v-list-item",[a("v-list-item-title",[a("v-text-field",{attrs:{label:"Artikel-Id","hide-details":"auto",type:"number"},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search()}},model:{value:e.searchFilter.itemId,callback:function(t){e.$set(e.searchFilter,"itemId",t)},expression:"searchFilter.itemId"}})],1)],1),a("v-list-item",[a("v-list-item-title",[a("v-text-field",{attrs:{label:"Varianten-Id","hide-details":"auto",type:"number"},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search()}},model:{value:e.searchFilter.varId,callback:function(t){e.$set(e.searchFilter,"varId",t)},expression:"searchFilter.varId"}})],1)],1),a("v-list-item",[a("v-list-item-title",[a("v-text-field",{attrs:{label:"Variantennummer","hide-details":"auto"},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search()}},model:{value:e.searchFilter.varNumber,callback:function(t){e.$set(e.searchFilter,"varNumber",t)},expression:"searchFilter.varNumber"}})],1)],1),a("v-list-item",[a("v-list-item-title",[a("v-text-field",{attrs:{label:"Artikeldaten","hide-details":"auto",type:"text"},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search()}},model:{value:e.searchFilter.itemData,callback:function(t){e.$set(e.searchFilter,"itemData",t)},expression:"searchFilter.itemData"}})],1)],1),a("v-list-item",[a("v-list-item-title",[a("v-select",{attrs:{items:e.manufacturer,label:"Hersteller",multiple:""},model:{value:e.searchFilter.manufacturer,callback:function(t){e.$set(e.searchFilter,"manufacturer",t)},expression:"searchFilter.manufacturer"}})],1)],1),a("v-list-item",[a("v-list-item-title",[a("v-select",{attrs:{items:e.mandanten,label:"Mandant",multiple:""},model:{value:e.searchFilter.mandant,callback:function(t){e.$set(e.searchFilter,"mandant",t)},expression:"searchFilter.mandant"}})],1)],1),a("v-list-item",[a("v-list-item-title",[a("v-select",{attrs:{items:e.selectItems.isActive,label:"Aktiv"},model:{value:e.searchFilter.isActive,callback:function(t){e.$set(e.searchFilter,"isActive",t)},expression:"searchFilter.isActive"}})],1)],1),a("v-list-item",{staticClass:"mb-3 mt-2"},[a("v-select",{attrs:{items:e.tags,label:"Tags",multiple:"","persistent-hint":""},scopedSlots:e._u([{key:"item",fn:function(t){var r=t.item;return[a("div",[a("v-badge",{staticClass:"ml-1",attrs:{left:"",color:r.color}}),a("span",{staticClass:"ml-1"},[e._v(" "+e._s(r.tagName)+" ")])],1)]}},{key:"selection",fn:function(t){var r=t.item,s=t.index;return[e.selectedTags.length>2&&2==s?[a("v-chip",{staticClass:"ml-4 my-3"},[e._v(" (+ "+e._s(e.selectedTags.length-2)+" Other ) ")])]:s<2?[a("div",{staticClass:"ml-4 my-3"},[a("v-badge",{staticClass:"ml-1",attrs:{left:"",color:r.color}}),a("span",{staticClass:"ml-1"},[e._v(" "+e._s(r.tagName)+" ")])],1)]:e._e()]}}],null,!1,4216515247),model:{value:e.selectedTags,callback:function(t){e.selectedTags=t},expression:"selectedTags"}})],1),a("v-list-item",[a("v-select",{attrs:{items:e.mark1Items,label:"Markierung 1"},model:{value:e.searchFilter.mark1,callback:function(t){e.$set(e.searchFilter,"mark1",t)},expression:"searchFilter.mark1"}})],1),a("v-list-item",[a("v-select",{attrs:{items:e.mark2Items,label:"Markierung 2"},model:{value:e.searchFilter.mark2,callback:function(t){e.$set(e.searchFilter,"mark2",t)},expression:"searchFilter.mark2"}})],1)]:[a("v-row",[a("v-col",{staticClass:"pa-5 pt-4",attrs:{cols:"12"}},[a("v-btn",{staticClass:"w-100",staticStyle:{color:"white"},attrs:{color:"orange",disabled:e.loading.search},on:{click:function(t){e.searchFilter.categories=[]}}},[0==e.loading.search?a("div",[a("v-icon",[e._v(" mdi-arrow-u-left-top ")])],1):a("v-progress-circular",{staticStyle:{width:"24px",height:"24px"},attrs:{indeterminate:""}})],1)],1)],1),a("v-treeview",{attrs:{selectable:"",hoverable:"","return-object":"",items:e.categoryTree,"open-on-click:true":""},model:{value:e.searchFilter.categories,callback:function(t){e.$set(e.searchFilter,"categories",t)},expression:"searchFilter.categories"}})]],2)]),a("v-col",{staticClass:"mt-2",attrs:{cols:"10"}},[1==e.loading.add?a("div",{staticClass:"loadingBackDrop"},[a("v-progress-circular",{staticStyle:{width:"200px",height:"200px"},attrs:{color:"blue lighten--1 ",indeterminate:""}})],1):e._e(),a("div",{staticClass:"flex-fill"},[a("v-data-table",{attrs:{loading:e.loading.search,headers:e.searchResultHeader,disabled:e.loading.add,options:e.searchOptions,items:e.searchResults,"footer-props":{"items-per-page-options":[15,50,100]},"item-key":"varId","server-items-length":e.searchResultsTotal,"item-class":e.setClassAlreadyCrossSeller,"show-select":"var"!==e.searchingFor},on:{"click:row":function(t){return e.setCrossSeller(t)},"update:options":function(t){return e.search(t)}},scopedSlots:e._u(["var"!==e.searchingFor?{key:"top",fn:function(){return[a("v-btn",{staticClass:"ma-2",attrs:{color:"success",disabled:e.selected.length<=0},on:{click:function(t){return e.addNewCrossSeller(e.selected)}}},[a("v-icon",[e._v(" mdi-plus ")]),e._v(" Cross Seller hinzufügen ")],1)]},proxy:!0}:null,{key:"item.image",fn:function(e){var t=e.item;return[a("v-avatar",[a("img",{staticClass:"img-fluid",staticStyle:{height:"75px"},attrs:{src:t.image}})])]}},{key:"item.tags",fn:function(t){var r=t.item;return[e._l(r.tags,(function(t){return[a("div",{key:r.varId+"_tag_"+t.tagId,staticClass:"ml-4 my-3"},[a("v-badge",{staticClass:"ml-1",attrs:{left:"",color:t.tag.color}}),a("span",{staticClass:"ml-1"},[e._v(" "+e._s(t.tag.tagName)+" ")])],1)]}))]}}],null,!0),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)])],1),a("v-snackbar",{attrs:{top:"",color:e.alerts.search.type,timeout:3e3,elevation:"15",right:""},model:{value:e.alerts.search.isActive,callback:function(t){e.$set(e.alerts.search,"isActive",t)},expression:"alerts.search.isActive"}},[e._v(" "+e._s(e.alerts.search.message)+" ")]),a("v-snackbar",{attrs:{top:"",right:"",elevation:"15",color:e.alerts.add.type,timeout:3e3},model:{value:e.alerts.add.isActive,callback:function(t){e.$set(e.alerts.add,"isActive",t)},expression:"alerts.add.isActive"}},[e._v(" "+e._s(e.alerts.add.message)+" ")]),a("v-snackbar",{attrs:{top:"",right:"",elevation:"15",color:e.alerts.delete.type,timeout:3e3},model:{value:e.alerts.delete.isActive,callback:function(t){e.$set(e.alerts.delete,"isActive",t)},expression:"alerts.delete.isActive"}},[e._v(" "+e._s(e.alerts.add.message)+" ")])],1)},Se=[],ye=(a("caad"),a("2532"),a("25f0"),{name:"Main",data:function(){return{tabSearch:0,searchOptions:{page:1,itemsPerPage:15},selected:[],alerts:{add:{message:"",isActive:!1,type:""},search:{message:"",isActive:!1,type:""},delete:{message:"",isActive:!1,type:""}},searchResultsTotal:0,useCategories:!0,mark1Items:["","Ohne",1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31],mark2Items:["","Ohne",1,2,3,4,5,6,7,8,9,10,11],selectedTags:[],searchResults:[],searchFilter:{categories:[],itemId:null,varId:null,varNumber:null,itemData:"",manufacturer:0,mandant:0,isActive:"JA",mark1:-1,mark2:-1},loading:{search:!1,add:!1},selectItems:{manufacturer:[],isActive:["ALLE","JA","NEIN"]},searchResultHeader:[{text:"",sortable:!1,value:"image"},{text:"Varianten-Id",sortable:!0,value:"varId"},{text:"Artikel-Id",sortable:!0,value:"itemId"},{text:"Name",sortable:!1,value:"itemName"},{text:"tags",sortable:!1,value:"tags"},{text:"Hersteller",sortable:!1,value:"manufacturer"}]}},computed:{selectedVariation:function(){return this.$store.state.selectedVariation},manufacturerMap:function(){return this.$store.state.manufacturerMap},mandantMap:function(){return this.$store.state.manufacturerMap},tags:function(){return console.log(this.$store.state.tags),this.$store.state.tags},crossSeller:function(){return this.$store.state.crossSeller},categoryTree:function(){return this.$store.state.categoryTree},searchingFor:function(){return this.$store.state.searchingFor},mandanten:function(){return this.$store.state.mandanten},manufacturer:function(){return this.$store.state.manufacturer}},methods:{setCrossSeller:function(e){"var"==this.searchingFor?this.getCrossSellerById(e.varId):this.selected.includes(e)?this.selected.splice(this.selected.indexOf(e),1):this.selected.push(e)},getCrossSellerById:function(e){var t=this;this.$store.commit("componentLoadingMessage","getting cross seller data"),this.$store.commit("componentLoading",!0);var a=[];t.$http.get("/variationCrossSeller/getCrossSellerForVar/"+e+"/de/").then((function(r){if(r){console.log("crossbyid",r);var s=r.data.selectedVar.data,i="";if(s.images.variation.length>0){var n=s.images.variation[0];""!==n.urlPreview?i=n.urlPreview:""==n.urlSecondPreview?i=n.urlSecondPreview:""==n.urlMiddle&&(i=n.urlMiddle)}else if(s.images.all.length>0){var l=s.images.all[0];""!==l.urlPreview?i=l.urlPreview:""==l.urlSecondPreview?i=l.urlSecondPreview:""==l.urlMiddle&&(i=l.urlMiddle)}var o="";"N / A"!==s.texts.name1?o=s.texts.name1:"N / A"!==s.texts.name2?o=s.texts.name2:"N / A"!==s.texts.name3&&(o=s.texts.name3);var c="";if(!1!==s.filter.hasManufacturer&&(c=s.item.manufacturer.name),t.$store.commit("selectedVariation",{attributes:s.attributes,itemId:s.variation.itemId,varId:s.variation.id,itemName:o,manufacturer:c,image:i,externalId:s.variation.externalId,varNumber:s.variation.number,client:s.ids.clients}),r.data&&r.data.vars.length>0)for(var d=0;d<r.data.vars.length;d++){var u=r.data.vars[d].data,m="";if(u.images.variation.length>0){var v=u.images.variation[0];""!==v.urlPreview?m=v.urlPreview:""==v.urlSecondPreview?m=v.urlSecondPreview:""==v.urlMiddle&&(m=v.urlMiddle)}else if(u.images.all.length>0){var h=u.images.all[0];""!==h.urlPreview?m=h.urlPreview:""==h.urlSecondPreview?m=h.urlSecondPreview:""==h.urlMiddle&&(m=h.urlMiddle)}var p="";"N / A"!==u.texts.name1?p=u.texts.name1:"N / A"!==u.texts.name2?p=u.texts.name2:"N / A"!==u.texts.name3&&(p=u.texts.name3);var f="";!1!==u.filter.hasManufacturer&&(f=u.item.manufacturer.name);var g={itemId:u.variation.itemId,varId:r.data.vars[d].id,itemName:p,manufacturer:f,image:m,position:r.data.vars[d].position,externalId:u.variation.externalId,varNumber:u.variation.number,client:u.ids.clients,attributes:u.attributes};a.push(g)}}t.$store.commit("crossSeller",a),t.$store.commit("componentLoading",!1),t.$router.push({path:"/CrossSeller/"+e})}))["catch"]((function(e){t.$store.commit("componentLoading",!1),console.log(e)}))},addNewCrossSeller:function(e){var t=this;t.loading.add=!0;for(var a={addTo:{varId:t.selectedVariation.varId,itemId:t.selectedVariation.itemId,itemName:t.selectedVariation.itemName,manufacturer:t.selectedVariation.manufacturer,externalVarId:t.selectedVariation.externalId,varNumber:t.selectedVariation.varNumber,client:t.selectedVariation.client},toAdd:[]},r=0,s=0;s<t.crossSeller.length;s++)t.crossSeller[s].position>r&&(r=t.crossSeller[s].position);console.log("addNewCrossSeller",e);for(var i=0;i<e.length;i++)a.toAdd.push({varId:e[i].varId,position:r+1}),e[i].position=r+1,r++;t.$http.post("/rest/variationCrossSeller/addCrossSeller/",a).then((function(e){e&&(t.mainTabs=1,t.alerts.add.isActive=!0,t.loading.add=!1,t.alerts.add.type="success",t.alerts.add.message="Cross Seller wurden erfolgreich verknüpft",t.getCrossSellerById(t.selectedVariation.varId))}))["catch"]((function(e){t.loading.add=!1,t.alerts.add.type="error",t.alerts.add.isActive=!0,t.alerts.add.message="Cross Seller konnten nicht verknüpft werden"}))},setClassAlreadyCrossSeller:function(e){return 1==this.alreadyCrossSeller(e.varId)&&"var"!==this.searchingFor||e.varId==this.selectedVariation.varId?"alreadyCrossSeller":""},alreadyCrossSeller:function(e){for(var t=0;t<this.crossSeller.length;t++)if(e==this.crossSeller[t].varId)return!0;return!1},search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this;e!=={}&&(t.searchOptions.page=e.page,t.searchOptions.itemsPerPage=e.itemsPerPage),t.loading.search=!0;var a={with:"additionalSkus,attributeValues.attribute,attributeValues.attributeValue,barcodes.barcode,base.item,base.itemSerialNumber,base.feedback,base.characteristics,base.crossSelling,base.texts,base.availability,base.images,base.stock,base.stockStorageLocations,bundleComponents,categories.category,categories.categoryBranch,clients,defaultCategories.category,images.image,markets,marketIdentNumbers,salesPrices.salesPrice,skus,supplier.supplier,timestamps,warehouses.warehouse,unit.unit,tags.tag,base.shippingProfiles,comments,inheritance",page:t.searchOptions.page,itemsPerPage:t.searchOptions.itemsPerPage};if(t.searchFilter.categories.length>0&&1==t.useCategories){for(var r=[],s=0;s<t.searchFilter.categories.length;s++)r.push(t.searchFilter.categories[s].id);r=r.toString(),a.categoryIds="in:"+r}if(t.searchFilter.varId>0&&(a.ids="in:"+t.searchFilter.varId),t.searchFilter.varNumber>0&&(a.number="like:"+t.searchFilter.varNumber),t.searchFilter.itemId>0&&(a.itemIds="in:"+t.searchFilter.itemId),t.searchFilter.mandant.length>0)if(1==t.searchFilter.mandant.length)a.clientIds="in:"+t.mandantMap[t.searchFilter.mandant];else{a.clientIds="in:";for(var i=0;i<t.searchFilter.mandant.length;i++)i+1==t.searchFilter.mandant.length?a.clientIds=a.clientIds+t.mandantMap[t.searchFilter.mandant[i]]:a.clientIds=a.clientIds+t.mandantMap[t.searchFilter.mandant[i]]+","}if(t.selectedTags.length>0&&(a.tagIds="in:"+t.selectedTags.toString()),t.searchFilter.itemData.length>0&&(a.query=t.searchFilter.itemData),t.searchFilter.manufacturer.length>0){a.anyManufacturerId=[];for(var n=0;n<t.searchFilter.manufacturer.length;n++)a.anyManufacturerId.push(t.manufacturerMap[t.searchFilter.manufacturer[n]])}"ALLE"!==t.searchFilter.isActive&&("JA"==t.searchFilter.isActive?a.isActive=!0:"NEIN"==t.searchFilter.isActive&&(a.isActive=!1)),"Ohne"==t.searchFilter.mark2?a.flag2="in:0":t.searchFilter.mark2>-1&&(a.flag2="in:"+t.searchFilter.mark2),"Ohne"==t.searchFilter.mark1?a.flag1="in:0":t.searchFilter.mark1>-1&&(a.flag1="in:"+t.searchFilter.mark1),t.$http.get("/rest/pim/variations/",{params:a}).then((function(e){var a=[];if(e&&e.data&&e.data["entries"].length>0){var r=e.data;t.searchResultsTotal=r.totalsCount;for(var s=0;s<r["entries"].length;s++){var i="";r["entries"][s].base.images.length>0&&(i=r["entries"][s].base.images[0].urlPreview);var n="";r["entries"][s].base.texts.length>0&&(n=r["entries"][s].base.texts[0].name);for(var l="",o=0,c=Object.entries(t.manufacturerMap);o<c.length;o++){var d=Object(N["a"])(c[o],2),u=d[0],m=d[1];m==r["entries"][s].base.item.manufacturerId&&(l=u)}for(var v=[],h=0,p=Object.entries(t.mandantMap);h<p.length;h++)for(var f=Object(N["a"])(p[h],2),g=(f[0],f[1]),b=0;b<r["entries"][s].clients.length;b++)g==r["entries"][s].clients[b]&&v.push(g);var S={itemId:r["entries"][s].base.itemId,varId:r["entries"][s].id,manufacturer:l,attributes:r["entries"][s].attributeValues,image:i,itemName:n,externalId:r["entries"][s].base.externalId,client:v,tags:r["entries"][s].tags,varNumber:r["entries"][s].base.number,isSelectable:!t.alreadyCrossSeller(r["entries"][s].id)&&r["entries"][s].id!==t.selectedVariation.varId||"var"==t.searchingFor&&r["entries"][s].id!==t.selectedVariation.varId};a.push(S),t.loading.search=!1,t.searchResults=a}}else t.loading.search=!1,t.searchResults=a}))["catch"]((function(e){console.log(e),t.loading.search=!1,t.searchResults=[],t.alerts.search.isActive=!0,t.alerts.search.message="Suche fehlgeschlagen",t.alerts.search.type="error"}))},resetSearch:function(){this.selected=[],this.searchResults=[],this.searchFilter={categories:[],itemId:null,varId:null,varNumber:null,itemData:"",manufacturer:0,mandant:0,isActive:"JA",mark2:-1,mark1:-1}}}}),xe=ye,we=a("4ca6"),ke=a("ac7c"),Ce=a("cc20"),Ie=a("71a3"),_e=a("fe57"),Ve=a("eb2a"),Pe=Object(v["a"])(xe,be,Se,!1,null,null,null),Fe=Pe.exports;p()(Pe,{VAvatar:ae["a"],VBadge:we["a"],VBtn:w["a"],VCheckbox:ke["a"],VChip:Ce["a"],VCol:re["a"],VDataTable:ie["a"],VIcon:f["a"],VListItem:J["a"],VListItemTitle:H["b"],VMain:k["a"],VProgressCircular:_["a"],VRow:ne["a"],VSelect:z["a"],VSnackbar:le["a"],VTab:Ie["a"],VTabs:_e["a"],VTextField:Z["a"],VToolbar:oe["a"],VTreeview:Ve["a"]}),r["default"].use(F["a"]);var $e=[{path:"/",name:"dashboard",component:de},{path:"/search",name:"Search",component:Fe},{path:"/CrossSeller/:id",name:"Cross Seller",component:ge}],Ae=new F["a"]({routes:$e}),Ne=Ae,Me=a("2f62");r["default"].use(Me["a"]);var Oe=new Me["a"].Store({state:{searchingFor:"",crossSeller:[],selectedVariation:{},componentLoadingMessage:"",componentLoading:!1,categoryTree:{},mandantMap:{},mandanten:[],manufacturer:[],tags:[],manufacturerMap:{}},mutations:{searchingFor:function(e,t){e.searchingFor=t},crossSeller:function(e,t){e.crossSeller=t},selectedVariation:function(e,t){e.selectedVariation=t},componentLoadingMessage:function(e,t){e.componentLoadingMessage=t},componentLoading:function(e,t){e.componentLoading=t},categoryTree:function(e,t){e.categoryTree=t},mandantMap:function(e,t){e.componentLoading=t},mandanten:function(e,t){e.mandanten=t},manufacturerMap:function(e,t){e.manufacturerMap=t},manufacturer:function(e,t){e.manufacturer=t},tags:function(e,t){e.tags=t}}}),Te=a("f309");r["default"].use(Te["a"]);var Le=new Te["a"]({}),De=a("349e"),je=a.n(De),Ee=localStorage.getItem("accessToken");i.a.defaults.headers.common={Authorization:"Bearer "+Ee},r["default"].use(n["a"],i.a),r["default"].use(a("2ead")),r["default"].use(je.a),r["default"].config.productionTip=!1,new r["default"]({router:Ne,store:Oe,vuetify:Le,render:function(e){return e(P)}}).$mount("#app")}});
//# sourceMappingURL=app.9eebe79f.js.map