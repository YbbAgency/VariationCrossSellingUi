{"remainingRequest":"/Users/lennart/VueProjekte/plentyui/VariationCrossSellingUi/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lennart/VueProjekte/plentyui/VariationCrossSellingUi/src/components/Search.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lennart/VueProjekte/plentyui/VariationCrossSellingUi/src/components/Search.vue","mtime":1690964964682},{"path":"/Users/lennart/VueProjekte/plentyui/VariationCrossSellingUi/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/lennart/VueProjekte/plentyui/VariationCrossSellingUi/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lennart/VueProjekte/plentyui/VariationCrossSellingUi/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnTWFpbicsCiAgZGF0YTogKCkgPT4gKHsKICAgIHRhYlNlYXJjaDowLAogICAgc2VhcmNoT3B0aW9uczp7CiAgICAgIHBhZ2U6MSwKICAgICAgaXRlbXNQZXJQYWdlOjE1LAogICAgfSwKICAgIHNlbGVjdGVkOltdLAogICAgYWxlcnRzOiB7CiAgICAgIGFkZDogewogICAgICAgIG1lc3NhZ2U6JycsCiAgICAgICAgaXNBY3RpdmU6ZmFsc2UsCiAgICAgICAgdHlwZTonJwogICAgICB9LAogICAgICBzZWFyY2g6ewogICAgICAgIG1lc3NhZ2U6JycsCiAgICAgICAgaXNBY3RpdmU6ZmFsc2UsCiAgICAgICAgdHlwZTonJwogICAgICB9LAogICAgICBkZWxldGU6ewogICAgICAgIG1lc3NhZ2U6JycsCiAgICAgICAgaXNBY3RpdmU6ZmFsc2UsCiAgICAgICAgdHlwZTonJwogICAgICB9LAogICAgfSwKICAgIHNlYXJjaFJlc3VsdHNUb3RhbDowLAogICAgdXNlQ2F0ZWdvcmllczp0cnVlLAogICAgbWFyazFJdGVtczpbJycsIk9obmUiLDEsIDIsIDMsIDQsIDUsIDYsIDcsIDgsIDksIDEwLCAxMSwgMTIsIDEzLCAxNCwgMTUsIDE2LCAxNywgMTgsIDE5LCAyMCwgMjEsIDIyLCAyMywgMjQsIDI1LCAyNiwgMjcsIDI4LCAyOSwgMzAsIDMxXSwKICAgIG1hcmsySXRlbXM6WycnLCJPaG5lIiwxLCAyLCAzLCA0LCA1LCA2LCA3LCA4LCA5LCAxMCwgMTFdLAogICAgc2VsZWN0ZWRUYWdzOltdLAogICAgc2VhcmNoUmVzdWx0czpbXSwKICAgIHNlYXJjaEZpbHRlcjoKICAgICAgICB7CiAgICAgICAgICBjYXRlZ29yaWVzOltdLAogICAgICAgICAgaXRlbUlkOm51bGwsCiAgICAgICAgICB2YXJJZDpudWxsLAogICAgICAgICAgdmFyTnVtYmVyOm51bGwsCiAgICAgICAgICBpdGVtRGF0YTonJywKICAgICAgICAgIG1hbnVmYWN0dXJlcjowLAogICAgICAgICAgbWFuZGFudDowLAogICAgICAgICAgaXNBY3RpdmU6J0pBJywKICAgICAgICAgIG1hcmsxOi0xLAogICAgICAgICAgbWFyazI6LTEKICAgICAgICB9LAogICAgbG9hZGluZzp7CiAgICAgIHNlYXJjaDpmYWxzZSwKICAgICAgYWRkOmZhbHNlCiAgICB9LAogICAgc2VsZWN0SXRlbXM6IHsKICAgICAgbWFudWZhY3R1cmVyOiBbXSwKICAgICAgaXNBY3RpdmU6WwogICAgICAgICdBTExFJywKICAgICAgICAnSkEnLAogICAgICAgICdORUlOJwogICAgICBdCiAgICB9LCBzZWFyY2hSZXN1bHRIZWFkZXI6IFsKICAgICAgewogICAgICAgIHRleHQ6JycsCiAgICAgICAgc29ydGFibGU6IGZhbHNlLAogICAgICAgIHZhbHVlOidpbWFnZScKICAgICAgfSwKICAgICAgewogICAgICAgIHRleHQ6ICdWYXJpYW50ZW4tSWQnLAogICAgICAgIHNvcnRhYmxlOiB0cnVlLAogICAgICAgIHZhbHVlOiAndmFySWQnLAogICAgICB9LAogICAgICB7CiAgICAgICAgdGV4dDogJ0FydGlrZWwtSWQnLAogICAgICAgIHNvcnRhYmxlOiB0cnVlLAogICAgICAgIHZhbHVlOiAnaXRlbUlkJywKICAgICAgfSwKICAgICAgewogICAgICAgIHRleHQ6ICdOYW1lJywKICAgICAgICBzb3J0YWJsZTogZmFsc2UsCiAgICAgICAgdmFsdWU6ICdpdGVtTmFtZScsCiAgICAgIH0sCiAgICAgIHsKICAgICAgICB0ZXh0OiAndGFncycsCiAgICAgICAgc29ydGFibGU6IGZhbHNlLAogICAgICAgIHZhbHVlOiAndGFncycsCiAgICAgIH0sCiAgICAgIHsKICAgICAgICB0ZXh0OidIZXJzdGVsbGVyJywKICAgICAgICBzb3J0YWJsZTogZmFsc2UsCiAgICAgICAgdmFsdWU6J21hbnVmYWN0dXJlcicKICAgICAgfQogICAgXSwKICB9KSwKICBjb21wdXRlZDp7CiAgICAgIHNlbGVjdGVkVmFyaWF0aW9uOiBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5zZWxlY3RlZFZhcmlhdGlvbjsKICAgICAgfSAsCiAgICAgIG1hbnVmYWN0dXJlck1hcDogZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUubWFudWZhY3R1cmVyTWFwOwogICAgICB9LAogICAgICBtYW5kYW50TWFwOiBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5tYW51ZmFjdHVyZXJNYXA7CiAgICAgIH0sCiAgICAgIHRhZ3M6IGZ1bmN0aW9uICgpIHsKICAgICAgICBjb25zb2xlLmxvZyh0aGlzLiRzdG9yZS5zdGF0ZS50YWdzKQogICAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS50YWdzOwogICAgICB9LAogICAgICBjcm9zc1NlbGxlcjogZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5jcm9zc1NlbGxlcjsKICAgICAgfSwKICAgICAgY2F0ZWdvcnlUcmVlOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLmNhdGVnb3J5VHJlZTsKICAgICAgfSwKICAgICAgc2VhcmNoaW5nRm9yOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLnNlYXJjaGluZ0ZvcjsKICAgICAgfSwKICAgICAgbWFuZGFudGVuOiBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5tYW5kYW50ZW47CiAgICAgIH0sCiAgICAgIG1hbnVmYWN0dXJlcjogZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUubWFudWZhY3R1cmVyOwogICAgICB9CgoKCiAgfSwKICBtZXRob2RzOgogIHsKICAgIHNldENyb3NzU2VsbGVyKGV2ZW50KQogICAgewoKICAgICAgaWYodGhpcy5zZWFyY2hpbmdGb3IgPT0gJ3ZhcicpCiAgICAgIHsKICAgICAgICB0aGlzLmdldENyb3NzU2VsbGVyQnlJZChldmVudC52YXJJZCkKICAgICAgfQogICAgICBlbHNlewogICAgICAgIGlmKHRoaXMuc2VsZWN0ZWQuaW5jbHVkZXMoZXZlbnQpKQogICAgICAgIHsKICAgICAgICAgIHRoaXMuc2VsZWN0ZWQuc3BsaWNlKHRoaXMuc2VsZWN0ZWQuaW5kZXhPZihldmVudCksMSkKICAgICAgICB9CiAgICAgICAgZWxzZQogICAgICAgIHsKICAgICAgICAgIHRoaXMuc2VsZWN0ZWQucHVzaChldmVudCkKICAgICAgICB9CiAgICAgIH0KCiAgICB9LAogICAgZ2V0Q3Jvc3NTZWxsZXJCeUlkKHZhcklkKQogICAgewogICAgICBsZXQgX3NlbGYgPSB0aGlzOwoKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdjb21wb25lbnRMb2FkaW5nTWVzc2FnZScsJ2dldHRpbmcgY3Jvc3Mgc2VsbGVyIGRhdGEnKTsKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdjb21wb25lbnRMb2FkaW5nJyx0cnVlKTsKCiAgICAgIGxldCBjcm9zc1NlbGxlciA9IFtdOwoKICAgICAgX3NlbGYuJGh0dHAuZ2V0KCBwcm9jZXNzLmVudi5WVUVfQVBQX0dFVF9DUk9TU1NFTExFUit2YXJJZCsnLycrJ2RlJysnLycrcHJvY2Vzcy5lbnYuVlVFX0FQUF9QTFVHSU5fU0VUX1BSRVZJRVcpLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgaWYocmVzcG9uc2UpCiAgICAgICAgewogICAgICAgICAgY29uc29sZS5sb2coJ2Nyb3NzYnlpZCcscmVzcG9uc2UpCiAgICAgICAgICBsZXQgc2VsZWN0VmFyID0gcmVzcG9uc2UuZGF0YS5zZWxlY3RlZFZhci5kYXRhOwoKICAgICAgICAgIGxldCBpbWFnZSA9ICcnOwoKICAgICAgICAgIGlmKHNlbGVjdFZhci5pbWFnZXMudmFyaWF0aW9uLmxlbmd0aCA+IDApCiAgICAgICAgICB7CiAgICAgICAgICAgIGxldCB2YXJJbWFnZXMgID0gc2VsZWN0VmFyLmltYWdlcy52YXJpYXRpb25bMF07CgogICAgICAgICAgICBpZih2YXJJbWFnZXMudXJsUHJldmlldyAhPT0gJycpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBpbWFnZSA9IHZhckltYWdlcy51cmxQcmV2aWV3CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZih2YXJJbWFnZXMudXJsU2Vjb25kUHJldmlldyA9PSAnJykKICAgICAgICAgICAgewogICAgICAgICAgICAgIGltYWdlID0gdmFySW1hZ2VzLnVybFNlY29uZFByZXZpZXcKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIGlmKHZhckltYWdlcy51cmxNaWRkbGUgPT0gJycpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBpbWFnZSA9IHZhckltYWdlcy51cmxNaWRkbGUKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgZWxzZSBpZihzZWxlY3RWYXIuaW1hZ2VzLmFsbC5sZW5ndGggPiAwKQogICAgICAgICAgewogICAgICAgICAgICBsZXQgYWxsSW1hZ2VzICA9IHNlbGVjdFZhci5pbWFnZXMuYWxsWzBdOwoKICAgICAgICAgICAgaWYoYWxsSW1hZ2VzLnVybFByZXZpZXcgIT09ICcnKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgaW1hZ2UgPSBhbGxJbWFnZXMudXJsUHJldmlldwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgaWYoYWxsSW1hZ2VzLnVybFNlY29uZFByZXZpZXcgPT0gJycpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBpbWFnZSA9IGFsbEltYWdlcy51cmxTZWNvbmRQcmV2aWV3CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZihhbGxJbWFnZXMudXJsTWlkZGxlID09ICcnKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgaW1hZ2UgPSBhbGxJbWFnZXMudXJsTWlkZGxlCiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICBsZXQgbmFtZSAgPSAnJzsKCiAgICAgICAgICBpZihzZWxlY3RWYXIudGV4dHMubmFtZTEgIT09ICJOIC8gQSIpCiAgICAgICAgICB7CiAgICAgICAgICAgIG5hbWUgPSBzZWxlY3RWYXIudGV4dHMubmFtZTEKICAgICAgICAgIH0KICAgICAgICAgIGVsc2UgaWYoc2VsZWN0VmFyLnRleHRzLm5hbWUyICE9PSAnTiAvIEEnKQogICAgICAgICAgewogICAgICAgICAgICBuYW1lID0gc2VsZWN0VmFyLnRleHRzLm5hbWUyCiAgICAgICAgICB9CiAgICAgICAgICBlbHNlIGlmKHNlbGVjdFZhci50ZXh0cy5uYW1lMyAhPT0gJ04gLyBBJykKICAgICAgICAgIHsKICAgICAgICAgICAgbmFtZSA9IHNlbGVjdFZhci50ZXh0cy5uYW1lMwogICAgICAgICAgfQogICAgICAgICAgbGV0IG1hbnVmYWN0dXJlciA9ICcnOwoKICAgICAgICAgIGlmKHNlbGVjdFZhci5maWx0ZXIuaGFzTWFudWZhY3R1cmVyICE9PSBmYWxzZSkKICAgICAgICAgIHsKICAgICAgICAgICAgbWFudWZhY3R1cmVyID0gc2VsZWN0VmFyLml0ZW0ubWFudWZhY3R1cmVyLm5hbWUKICAgICAgICAgIH0KICAgICAgICAgIF9zZWxmLiRzdG9yZS5jb21taXQoJ3NlbGVjdGVkVmFyaWF0aW9uJywgewogICAgICAgICAgICBhdHRyaWJ1dGVzOnNlbGVjdFZhci5hdHRyaWJ1dGVzLAogICAgICAgICAgICBpdGVtSWQ6c2VsZWN0VmFyLnZhcmlhdGlvbi5pdGVtSWQsCiAgICAgICAgICAgIHZhcklkOnNlbGVjdFZhci52YXJpYXRpb24uaWQsCiAgICAgICAgICAgIGl0ZW1OYW1lOm5hbWUsCiAgICAgICAgICAgIG1hbnVmYWN0dXJlcjptYW51ZmFjdHVyZXIsCiAgICAgICAgICAgIGltYWdlOmltYWdlLAogICAgICAgICAgICBleHRlcm5hbElkOnNlbGVjdFZhci52YXJpYXRpb24uZXh0ZXJuYWxJZCwKICAgICAgICAgICAgdmFyTnVtYmVyOnNlbGVjdFZhci52YXJpYXRpb24ubnVtYmVyLAogICAgICAgICAgICBjbGllbnQ6c2VsZWN0VmFyLmlkcy5jbGllbnRzCiAgICAgICAgICB9KQoKICAgICAgICAgIGlmKHJlc3BvbnNlLmRhdGEgJiYgcmVzcG9uc2UuZGF0YS52YXJzLmxlbmd0aCA+IDAgKQogICAgICAgICAgewogICAgICAgICAgICBmb3IobGV0IGkgPSAwIDsgaSA8IHJlc3BvbnNlLmRhdGEudmFycy5sZW5ndGggOyBpKyspCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBsZXQgY3VycmVudEl0ZW1EYXRhID0gcmVzcG9uc2UuZGF0YS52YXJzW2ldLmRhdGE7CgogICAgICAgICAgICAgIGxldCBpbWFnZSA9ICcnOwoKICAgICAgICAgICAgICBpZihjdXJyZW50SXRlbURhdGEuaW1hZ2VzLnZhcmlhdGlvbi5sZW5ndGggPiAwKQogICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGxldCB2YXJJbWFnZXMgID0gY3VycmVudEl0ZW1EYXRhLmltYWdlcy52YXJpYXRpb25bMF07CgogICAgICAgICAgICAgICAgaWYodmFySW1hZ2VzLnVybFByZXZpZXcgIT09ICcnKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBpbWFnZSA9IHZhckltYWdlcy51cmxQcmV2aWV3CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIGlmKHZhckltYWdlcy51cmxTZWNvbmRQcmV2aWV3ID09ICcnKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBpbWFnZSA9IHZhckltYWdlcy51cmxTZWNvbmRQcmV2aWV3CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIGlmKHZhckltYWdlcy51cmxNaWRkbGUgPT0gJycpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIGltYWdlID0gdmFySW1hZ2VzLnVybE1pZGRsZQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBlbHNlIGlmKGN1cnJlbnRJdGVtRGF0YS5pbWFnZXMuYWxsLmxlbmd0aCA+IDApCiAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgbGV0IGFsbEltYWdlcyAgPSBjdXJyZW50SXRlbURhdGEuaW1hZ2VzLmFsbFswXTsKCiAgICAgICAgICAgICAgICBpZihhbGxJbWFnZXMudXJsUHJldmlldyAhPT0gJycpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIGltYWdlID0gYWxsSW1hZ2VzLnVybFByZXZpZXcKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgaWYoYWxsSW1hZ2VzLnVybFNlY29uZFByZXZpZXcgPT0gJycpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIGltYWdlID0gYWxsSW1hZ2VzLnVybFNlY29uZFByZXZpZXcKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgaWYoYWxsSW1hZ2VzLnVybE1pZGRsZSA9PSAnJykKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgaW1hZ2UgPSBhbGxJbWFnZXMudXJsTWlkZGxlCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBsZXQgbmFtZSAgPSAnJzsKCiAgICAgICAgICAgICAgaWYoY3VycmVudEl0ZW1EYXRhLnRleHRzLm5hbWUxICE9PSAiTiAvIEEiKQogICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIG5hbWUgPSBjdXJyZW50SXRlbURhdGEudGV4dHMubmFtZTEKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgZWxzZSBpZihjdXJyZW50SXRlbURhdGEudGV4dHMubmFtZTIgIT09ICdOIC8gQScpCiAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgbmFtZSA9IGN1cnJlbnRJdGVtRGF0YS50ZXh0cy5uYW1lMgogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBlbHNlIGlmKGN1cnJlbnRJdGVtRGF0YS50ZXh0cy5uYW1lMyAhPT0gJ04gLyBBJykKICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBuYW1lID0gY3VycmVudEl0ZW1EYXRhLnRleHRzLm5hbWUzCiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBsZXQgbWFudWZhY3R1cmVyID0gJyc7CgogICAgICAgICAgICAgIGlmKGN1cnJlbnRJdGVtRGF0YS5maWx0ZXIuaGFzTWFudWZhY3R1cmVyICE9PSBmYWxzZSkKICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBtYW51ZmFjdHVyZXIgPSBjdXJyZW50SXRlbURhdGEuaXRlbS5tYW51ZmFjdHVyZXIubmFtZQogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgbGV0IG9iamVjdCA9IHsKICAgICAgICAgICAgICAgIGl0ZW1JZDpjdXJyZW50SXRlbURhdGEudmFyaWF0aW9uLml0ZW1JZCwKICAgICAgICAgICAgICAgIHZhcklkOnJlc3BvbnNlLmRhdGEudmFyc1tpXS5pZCwKICAgICAgICAgICAgICAgIGl0ZW1OYW1lOm5hbWUsCiAgICAgICAgICAgICAgICBtYW51ZmFjdHVyZXI6bWFudWZhY3R1cmVyLAogICAgICAgICAgICAgICAgaW1hZ2U6aW1hZ2UsCiAgICAgICAgICAgICAgICBwb3NpdGlvbjpyZXNwb25zZS5kYXRhLnZhcnNbaV0ucG9zaXRpb24sCiAgICAgICAgICAgICAgICBleHRlcm5hbElkOmN1cnJlbnRJdGVtRGF0YS52YXJpYXRpb24uZXh0ZXJuYWxJZCwKICAgICAgICAgICAgICAgIHZhck51bWJlcjpjdXJyZW50SXRlbURhdGEudmFyaWF0aW9uLm51bWJlciwKICAgICAgICAgICAgICAgIGNsaWVudDpjdXJyZW50SXRlbURhdGEuaWRzLmNsaWVudHMsCiAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOmN1cnJlbnRJdGVtRGF0YS5hdHRyaWJ1dGVzCiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGNyb3NzU2VsbGVyLnB1c2gob2JqZWN0KQogICAgICAgICAgICB9CgogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgX3NlbGYuJHN0b3JlLmNvbW1pdCgnY3Jvc3NTZWxsZXInLGNyb3NzU2VsbGVyKQogICAgICAgIF9zZWxmLiRzdG9yZS5jb21taXQoJ2NvbXBvbmVudExvYWRpbmcnLGZhbHNlKTsKCiAgICAgICAgX3NlbGYuJHJvdXRlci5wdXNoKHtwYXRoOiAnL0Nyb3NzU2VsbGVyLycrdmFySWR9KQoKICAgICAgfSkuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgICAgX3NlbGYuJHN0b3JlLmNvbW1pdCgnY29tcG9uZW50TG9hZGluZycsZmFsc2UpOwogICAgICAgIGNvbnNvbGUubG9nKGVycm9yKQogICAgICAgIC8vIF9zZWxmLm15QWxlcnRzLmVycm9yID0gdHJ1ZTsKICAgICAgICAvLyBfc2VsZi5teUFsZXJ0cy5lcnJvck1lc3NhZ2UgPSBlcnJvcgogICAgICAgIC8vIF9zZWxmLnJlc2V0RXJvcnIoKTsKICAgICAgfSkKCiAgICB9LAoKICAgIGFkZE5ld0Nyb3NzU2VsbGVyKHZhcnMpCiAgICB7CiAgICAgIGxldCBfc2VsZiA9IHRoaXM7CgogICAgICBfc2VsZi5sb2FkaW5nLmFkZCA9IHRydWU7CgogICAgICBsZXQgZGF0YSA9IHsKICAgICAgICBhZGRUbzp7CiAgICAgICAgICB2YXJJZDpfc2VsZi5zZWxlY3RlZFZhcmlhdGlvbi52YXJJZCwKICAgICAgICAgIGl0ZW1JZDpfc2VsZi5zZWxlY3RlZFZhcmlhdGlvbi5pdGVtSWQsCiAgICAgICAgICBpdGVtTmFtZTpfc2VsZi5zZWxlY3RlZFZhcmlhdGlvbi5pdGVtTmFtZSwKICAgICAgICAgIG1hbnVmYWN0dXJlcjpfc2VsZi5zZWxlY3RlZFZhcmlhdGlvbi5tYW51ZmFjdHVyZXIsCiAgICAgICAgICBleHRlcm5hbFZhcklkOl9zZWxmLnNlbGVjdGVkVmFyaWF0aW9uLmV4dGVybmFsSWQsCiAgICAgICAgICB2YXJOdW1iZXI6X3NlbGYuc2VsZWN0ZWRWYXJpYXRpb24udmFyTnVtYmVyLAogICAgICAgICAgY2xpZW50Ol9zZWxmLnNlbGVjdGVkVmFyaWF0aW9uLmNsaWVudAogICAgICAgIH0sCiAgICAgICAgdG9BZGQ6W10KICAgICAgfQoKICAgICAgbGV0IGhpZ2hlc3RQb3MgPSAwOwoKICAgICAgZm9yKGxldCBpID0gMCA7IGkgPCAgX3NlbGYuY3Jvc3NTZWxsZXIubGVuZ3RoIDsgaSsrKQogICAgICB7CiAgICAgICAgaWYoX3NlbGYuY3Jvc3NTZWxsZXJbaV0ucG9zaXRpb24gPiBoaWdoZXN0UG9zKQogICAgICAgIHsKICAgICAgICAgIGhpZ2hlc3RQb3MgPSBfc2VsZi5jcm9zc1NlbGxlcltpXS5wb3NpdGlvbjsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGNvbnNvbGUubG9nKCdhZGROZXdDcm9zc1NlbGxlcicsdmFycykKCiAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCB2YXJzLmxlbmd0aDsgaSsrKQogICAgICB7CiAgICAgICAgZGF0YS50b0FkZC5wdXNoKAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgdmFySWQ6dmFyc1tpXS52YXJJZCwKICAgICAgICAgICAgICBwb3NpdGlvbjpoaWdoZXN0UG9zKzEKICAgICAgICAgICAgfQogICAgICAgICkKCiAgICAgICAgdmFyc1tpXS5wb3NpdGlvbiA9IGhpZ2hlc3RQb3MrMTsKCiAgICAgICAgaGlnaGVzdFBvcysrOwogICAgICB9CgogICAgICBfc2VsZi4kaHR0cC5wb3N0KCBwcm9jZXNzLmVudi5WVUVfQVBQX0FERF9DUk9TU1NFTExFUitwcm9jZXNzLmVudi5WVUVfQVBQX1BMVUdJTl9TRVRfUFJFVklFVyxkYXRhKS50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgIGlmKHJlc3BvbnNlKQogICAgICAgIHsKICAgICAgICAgIF9zZWxmLm1haW5UYWJzID0gMTsKICAgICAgICAgIF9zZWxmLmFsZXJ0cy5hZGQuaXNBY3RpdmUgPSB0cnVlOwogICAgICAgICAgX3NlbGYubG9hZGluZy5hZGQgPSBmYWxzZTsKICAgICAgICAgIF9zZWxmLmFsZXJ0cy5hZGQudHlwZSA9ICdzdWNjZXNzJzsKICAgICAgICAgIF9zZWxmLmFsZXJ0cy5hZGQubWVzc2FnZSA9ICJDcm9zcyBTZWxsZXIgd3VyZGVuIGVyZm9sZ3JlaWNoIHZlcmtuw7xwZnQiCiAgICAgICAgICBfc2VsZi5nZXRDcm9zc1NlbGxlckJ5SWQoX3NlbGYuc2VsZWN0ZWRWYXJpYXRpb24udmFySWQpCiAgICAgICAgfQogICAgICB9KS5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICBfc2VsZi5sb2FkaW5nLmFkZCA9IGZhbHNlOwogICAgICAgIF9zZWxmLmFsZXJ0cy5hZGQudHlwZSA9ICdlcnJvcic7CiAgICAgICAgX3NlbGYuYWxlcnRzLmFkZC5pc0FjdGl2ZSA9IHRydWU7CiAgICAgICAgX3NlbGYuYWxlcnRzLmFkZC5tZXNzYWdlID0gIkNyb3NzIFNlbGxlciBrb25udGVuIG5pY2h0IHZlcmtuw7xwZnQgd2VyZGVuIgogICAgICAgIC8vIF9zZWxmLm15QWxlcnRzLmVycm9yID0gdHJ1ZTsKICAgICAgICAvLyBfc2VsZi5teUFsZXJ0cy5lcnJvck1lc3NhZ2UgPSBlcnJvcgogICAgICAgIC8vIF9zZWxmLnJlc2V0RXJvcnIoKTsKICAgICAgfSkKICAgIH0sCiAgICBzZXRDbGFzc0FscmVhZHlDcm9zc1NlbGxlcihpdGVtKQogICAgewogICAgICBpZih0aGlzLmFscmVhZHlDcm9zc1NlbGxlcihpdGVtLnZhcklkKSA9PSB0cnVlICYmIHRoaXMuc2VhcmNoaW5nRm9yICE9PSAndmFyJyAgfHwgIGl0ZW0udmFySWQgPT0gdGhpcy5zZWxlY3RlZFZhcmlhdGlvbi52YXJJZCkKICAgICAgewogICAgICAgIHJldHVybiAnYWxyZWFkeUNyb3NzU2VsbGVyJwogICAgICB9CiAgICAgIGVsc2V7CiAgICAgICAgcmV0dXJuICcnCiAgICAgIH0KICAgIH0sCiAgICBhbHJlYWR5Q3Jvc3NTZWxsZXIodmFySWQpCiAgICB7CiAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCB0aGlzLmNyb3NzU2VsbGVyLmxlbmd0aDsgaSsrKQogICAgICB7CiAgICAgICAgaWYodmFySWQgPT0gdGhpcy5jcm9zc1NlbGxlcltpXS52YXJJZCkKICAgICAgICB7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIGZhbHNlOwogICAgfSwKICAgIHNlYXJjaChldmVudCA9IHt9KSB7CiAgICAgIGxldCBfc2VsZiA9IHRoaXM7CgogICAgICBpZiAoZXZlbnQgIT09IHt9KSB7CiAgICAgICAgX3NlbGYuc2VhcmNoT3B0aW9ucy5wYWdlID0gZXZlbnQucGFnZTsKICAgICAgICBfc2VsZi5zZWFyY2hPcHRpb25zLml0ZW1zUGVyUGFnZSA9IGV2ZW50Lml0ZW1zUGVyUGFnZTsKICAgICAgfQoKICAgICAgX3NlbGYubG9hZGluZy5zZWFyY2ggPSB0cnVlOwoKICAgICAgbGV0IGRhdGEgPSB7CiAgICAgICAgd2l0aDogJ2FkZGl0aW9uYWxTa3VzLGF0dHJpYnV0ZVZhbHVlcy5hdHRyaWJ1dGUsYXR0cmlidXRlVmFsdWVzLmF0dHJpYnV0ZVZhbHVlLGJhcmNvZGVzLmJhcmNvZGUsYmFzZS5pdGVtLGJhc2UuaXRlbVNlcmlhbE51bWJlcixiYXNlLmZlZWRiYWNrLGJhc2UuY2hhcmFjdGVyaXN0aWNzLGJhc2UuY3Jvc3NTZWxsaW5nLGJhc2UudGV4dHMsYmFzZS5hdmFpbGFiaWxpdHksYmFzZS5pbWFnZXMsYmFzZS5zdG9jayxiYXNlLnN0b2NrU3RvcmFnZUxvY2F0aW9ucyxidW5kbGVDb21wb25lbnRzLGNhdGVnb3JpZXMuY2F0ZWdvcnksY2F0ZWdvcmllcy5jYXRlZ29yeUJyYW5jaCxjbGllbnRzLGRlZmF1bHRDYXRlZ29yaWVzLmNhdGVnb3J5LGltYWdlcy5pbWFnZSxtYXJrZXRzLG1hcmtldElkZW50TnVtYmVycyxzYWxlc1ByaWNlcy5zYWxlc1ByaWNlLHNrdXMsc3VwcGxpZXIuc3VwcGxpZXIsdGltZXN0YW1wcyx3YXJlaG91c2VzLndhcmVob3VzZSx1bml0LnVuaXQsdGFncy50YWcsYmFzZS5zaGlwcGluZ1Byb2ZpbGVzLGNvbW1lbnRzLGluaGVyaXRhbmNlJywKICAgICAgICBwYWdlOiBfc2VsZi5zZWFyY2hPcHRpb25zLnBhZ2UsCiAgICAgICAgaXRlbXNQZXJQYWdlOiBfc2VsZi5zZWFyY2hPcHRpb25zLml0ZW1zUGVyUGFnZQogICAgICB9CgoKICAgICAgaWYgKF9zZWxmLnNlYXJjaEZpbHRlci5jYXRlZ29yaWVzLmxlbmd0aCA+IDAgJiYgX3NlbGYudXNlQ2F0ZWdvcmllcyA9PSB0cnVlKSB7CiAgICAgICAgbGV0IGNhdElkcyA9IFtdOwogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgX3NlbGYuc2VhcmNoRmlsdGVyLmNhdGVnb3JpZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIGNhdElkcy5wdXNoKF9zZWxmLnNlYXJjaEZpbHRlci5jYXRlZ29yaWVzW2ldLmlkKQogICAgICAgIH0KICAgICAgICBjYXRJZHMgPSBjYXRJZHMudG9TdHJpbmcoKQoKICAgICAgICBkYXRhLmNhdGVnb3J5SWRzID0gJ2luOicgKyBjYXRJZHMKICAgICAgfQogICAgICBpZiAoX3NlbGYuc2VhcmNoRmlsdGVyLnZhcklkID4gMCkgewogICAgICAgIGRhdGEuaWRzID0gJ2luOicgKyBfc2VsZi5zZWFyY2hGaWx0ZXIudmFySWQKICAgICAgfQogICAgICBpZiAoX3NlbGYuc2VhcmNoRmlsdGVyLnZhck51bWJlciA+IDApIHsKICAgICAgICBkYXRhLm51bWJlciA9ICdsaWtlOicgKyBfc2VsZi5zZWFyY2hGaWx0ZXIudmFyTnVtYmVyCiAgICAgIH0KICAgICAgaWYgKF9zZWxmLnNlYXJjaEZpbHRlci5pdGVtSWQgPiAwKSB7CiAgICAgICAgZGF0YS5pdGVtSWRzID0gJ2luOicgKyBfc2VsZi5zZWFyY2hGaWx0ZXIuaXRlbUlkCiAgICAgIH0KICAgICAgaWYgKF9zZWxmLnNlYXJjaEZpbHRlci5tYW5kYW50Lmxlbmd0aCA+IDApIHsKICAgICAgICBpZiAoX3NlbGYuc2VhcmNoRmlsdGVyLm1hbmRhbnQubGVuZ3RoID09IDEpIHsKICAgICAgICAgIGRhdGEuY2xpZW50SWRzID0gJ2luOicgKyBfc2VsZi5tYW5kYW50TWFwW19zZWxmLnNlYXJjaEZpbHRlci5tYW5kYW50XQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBkYXRhLmNsaWVudElkcyA9ICdpbjonCiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IF9zZWxmLnNlYXJjaEZpbHRlci5tYW5kYW50Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGlmIChpICsgMSA9PSBfc2VsZi5zZWFyY2hGaWx0ZXIubWFuZGFudC5sZW5ndGgpIHsKICAgICAgICAgICAgICBkYXRhLmNsaWVudElkcyA9IGRhdGEuY2xpZW50SWRzICsgX3NlbGYubWFuZGFudE1hcFtfc2VsZi5zZWFyY2hGaWx0ZXIubWFuZGFudFtpXV0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBkYXRhLmNsaWVudElkcyA9IGRhdGEuY2xpZW50SWRzICsgX3NlbGYubWFuZGFudE1hcFtfc2VsZi5zZWFyY2hGaWx0ZXIubWFuZGFudFtpXV0gKyAnLCcKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoX3NlbGYuc2VsZWN0ZWRUYWdzLmxlbmd0aCA+IDApIHsKICAgICAgICBkYXRhLnRhZ0lkcyA9ICdpbjonICsgX3NlbGYuc2VsZWN0ZWRUYWdzLnRvU3RyaW5nKCkKICAgICAgfQogICAgICBpZiAoX3NlbGYuc2VhcmNoRmlsdGVyLml0ZW1EYXRhLmxlbmd0aCA+IDApIHsKICAgICAgICBkYXRhLnF1ZXJ5ID0gX3NlbGYuc2VhcmNoRmlsdGVyLml0ZW1EYXRhCiAgICAgIH0KICAgICAgaWYgKF9zZWxmLnNlYXJjaEZpbHRlci5tYW51ZmFjdHVyZXIubGVuZ3RoID4gMCkgewogICAgICAgIGRhdGEuYW55TWFudWZhY3R1cmVySWQgPSBbXQogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgX3NlbGYuc2VhcmNoRmlsdGVyLm1hbnVmYWN0dXJlci5sZW5ndGg7IGkrKykgewogICAgICAgICAgZGF0YS5hbnlNYW51ZmFjdHVyZXJJZC5wdXNoKF9zZWxmLm1hbnVmYWN0dXJlck1hcFtfc2VsZi5zZWFyY2hGaWx0ZXIubWFudWZhY3R1cmVyW2ldXSkKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKF9zZWxmLnNlYXJjaEZpbHRlci5pc0FjdGl2ZSAhPT0gJ0FMTEUnKSB7CiAgICAgICAgaWYgKF9zZWxmLnNlYXJjaEZpbHRlci5pc0FjdGl2ZSA9PSAnSkEnKSB7CiAgICAgICAgICBkYXRhLmlzQWN0aXZlID0gdHJ1ZTsKICAgICAgICB9IGVsc2UgaWYgKF9zZWxmLnNlYXJjaEZpbHRlci5pc0FjdGl2ZSA9PSAnTkVJTicpIHsKICAgICAgICAgIGRhdGEuaXNBY3RpdmUgPSBmYWxzZTsKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKF9zZWxmLnNlYXJjaEZpbHRlci5tYXJrMiA9PSAiT2huZSIpIHsKICAgICAgICBkYXRhLmZsYWcyID0gJ2luOjAnCiAgICAgIH0gZWxzZSBpZiAoX3NlbGYuc2VhcmNoRmlsdGVyLm1hcmsyID4gLTEpIHsKICAgICAgICBkYXRhLmZsYWcyID0gJ2luOicgKyBfc2VsZi5zZWFyY2hGaWx0ZXIubWFyazI7CiAgICAgIH0KICAgICAgaWYgKF9zZWxmLnNlYXJjaEZpbHRlci5tYXJrMSA9PSAiT2huZSIpIHsKICAgICAgICBkYXRhLmZsYWcxID0gJ2luOjAnCiAgICAgIH0gZWxzZSBpZiAoX3NlbGYuc2VhcmNoRmlsdGVyLm1hcmsxID4gLTEpIHsKICAgICAgICBkYXRhLmZsYWcxID0gJ2luOicgKyBfc2VsZi5zZWFyY2hGaWx0ZXIubWFyazE7CiAgICAgIH0KICAgICAgX3NlbGYuJGh0dHAuZ2V0KHByb2Nlc3MuZW52LlZVRV9BUFBfR0VUX1ZBUklBVElPTlMsIHtwYXJhbXM6IGRhdGF9KS50aGVuKChyZXNwb25zZSkgPT4gewoKICAgICAgICBsZXQgcmVwbGFjZVRhYmxlID0gW10KCiAgICAgICAgaWYgKHJlc3BvbnNlICYmIHJlc3BvbnNlLmRhdGEgJiYgcmVzcG9uc2UuZGF0YVsiZW50cmllcyJdLmxlbmd0aCA+IDApIHsKICAgICAgICAgIGxldCBkYXRhID0gcmVzcG9uc2UuZGF0YTsKCiAgICAgICAgICBfc2VsZi5zZWFyY2hSZXN1bHRzVG90YWwgPSBkYXRhLnRvdGFsc0NvdW50OwoKICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YVsiZW50cmllcyJdLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGxldCBpbWFnZSA9ICcnCiAgICAgICAgICAgIGlmIChkYXRhWyJlbnRyaWVzIl1baV0uYmFzZS5pbWFnZXMubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgIGltYWdlID0gZGF0YVsiZW50cmllcyJdW2ldLmJhc2UuaW1hZ2VzWzBdLnVybFByZXZpZXcKICAgICAgICAgICAgfQoKICAgICAgICAgICAgbGV0IG5hbWUgPSAnJzsKICAgICAgICAgICAgaWYgKGRhdGFbImVudHJpZXMiXVtpXS5iYXNlLnRleHRzLmxlbmd0aCA+IDApIHsKCiAgICAgICAgICAgICAgbmFtZSA9IGRhdGFbImVudHJpZXMiXVtpXS5iYXNlLnRleHRzWzBdLm5hbWUKICAgICAgICAgICAgfQoKICAgICAgICAgICAgbGV0IG1hbnVmYWN0dXJlciA9ICcnCgogICAgICAgICAgICBmb3IgKGxldCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoX3NlbGYubWFudWZhY3R1cmVyTWFwKSkgewogICAgICAgICAgICAgIGlmICh2YWx1ZSA9PSBkYXRhWyJlbnRyaWVzIl1baV0uYmFzZS5pdGVtLm1hbnVmYWN0dXJlcklkKSB7CiAgICAgICAgICAgICAgICBtYW51ZmFjdHVyZXIgPSBrZXk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgfQogICAgICAgICAgICBsZXQgY2xpZW50cyA9IFtdCgogICAgICAgICAgICBmb3IgKGxldCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoX3NlbGYubWFuZGFudE1hcCkpIHsKICAgICAgICAgICAgICBmb3IgKGxldCBhID0gMDsgYSA8IGRhdGFbImVudHJpZXMiXVtpXS5jbGllbnRzLmxlbmd0aDsgYSsrKSB7CiAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT0gZGF0YVsiZW50cmllcyJdW2ldLmNsaWVudHNbYV0pIHsKICAgICAgICAgICAgICAgICAgY2xpZW50cy5wdXNoKHZhbHVlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGxldCBvYmplY3QgPSB7CiAgICAgICAgICAgICAgaXRlbUlkOiBkYXRhWyJlbnRyaWVzIl1baV0uYmFzZS5pdGVtSWQsCiAgICAgICAgICAgICAgdmFySWQ6IGRhdGFbImVudHJpZXMiXVtpXS5pZCwKICAgICAgICAgICAgICBtYW51ZmFjdHVyZXI6IG1hbnVmYWN0dXJlciwKICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiBkYXRhWyJlbnRyaWVzIl1baV0uYXR0cmlidXRlVmFsdWVzLAogICAgICAgICAgICAgIGltYWdlOiBpbWFnZSwKICAgICAgICAgICAgICBpdGVtTmFtZTogbmFtZSwKICAgICAgICAgICAgICBleHRlcm5hbElkOiBkYXRhWyJlbnRyaWVzIl1baV0uYmFzZS5leHRlcm5hbElkLAogICAgICAgICAgICAgIGNsaWVudDogY2xpZW50cywKICAgICAgICAgICAgICB0YWdzOiBkYXRhWyJlbnRyaWVzIl1baV0udGFncywKICAgICAgICAgICAgICB2YXJOdW1iZXI6IGRhdGFbImVudHJpZXMiXVtpXS5iYXNlLm51bWJlciwKICAgICAgICAgICAgICBpc1NlbGVjdGFibGU6ICghX3NlbGYuYWxyZWFkeUNyb3NzU2VsbGVyKGRhdGFbImVudHJpZXMiXVtpXS5pZCkgJiYgZGF0YVsiZW50cmllcyJdW2ldLmlkICE9PSBfc2VsZi5zZWxlY3RlZFZhcmlhdGlvbi52YXJJZCkgfHwgKF9zZWxmLnNlYXJjaGluZ0ZvciA9PSAndmFyJyAmJiBkYXRhWyJlbnRyaWVzIl1baV0uaWQgIT09IF9zZWxmLnNlbGVjdGVkVmFyaWF0aW9uLnZhcklkKQogICAgICAgICAgICB9CgogICAgICAgICAgICByZXBsYWNlVGFibGUucHVzaChvYmplY3QpCgogICAgICAgICAgICBfc2VsZi5sb2FkaW5nLnNlYXJjaCA9IGZhbHNlOwogICAgICAgICAgICBfc2VsZi5zZWFyY2hSZXN1bHRzID0gcmVwbGFjZVRhYmxlCiAgICAgICAgICB9CgogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfc2VsZi5sb2FkaW5nLnNlYXJjaCA9IGZhbHNlOwogICAgICAgICAgX3NlbGYuc2VhcmNoUmVzdWx0cyA9IHJlcGxhY2VUYWJsZQogICAgICAgIH0KICAgICAgfSkuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpCgogICAgICAgIF9zZWxmLmxvYWRpbmcuc2VhcmNoID0gZmFsc2U7CiAgICAgICAgX3NlbGYuc2VhcmNoUmVzdWx0cyA9IFtdOwoKICAgICAgICBfc2VsZi5hbGVydHMuc2VhcmNoLmlzQWN0aXZlID0gdHJ1ZTsKICAgICAgICBfc2VsZi5hbGVydHMuc2VhcmNoLm1lc3NhZ2UgPSAiU3VjaGUgZmVobGdlc2NobGFnZW4iCiAgICAgICAgX3NlbGYuYWxlcnRzLnNlYXJjaC50eXBlID0gImVycm9yIgogICAgICAgIC8vIF9zZWxmLm15QWxlcnRzLmVycm9yID0gdHJ1ZTsKICAgICAgICAvLyBfc2VsZi5teUFsZXJ0cy5lcnJvck1lc3NhZ2UgPSBlcnJvcgogICAgICAgIC8vIF9zZWxmLnJlc2V0RXJvcnIoKTsKICAgICAgfSkKICAgIH0sCiAgICByZXNldFNlYXJjaCgpCiAgICB7CiAgICAgIHRoaXMuc2VsZWN0ZWQgPSBbXTsKICAgICAgdGhpcy5zZWFyY2hSZXN1bHRzID0gW107CiAgICAgIHRoaXMuc2VhcmNoRmlsdGVyID0gewogICAgICAgIGNhdGVnb3JpZXM6W10sCiAgICAgICAgaXRlbUlkOm51bGwsCiAgICAgICAgdmFySWQ6bnVsbCwKICAgICAgICB2YXJOdW1iZXI6bnVsbCwKICAgICAgICBpdGVtRGF0YTonJywKICAgICAgICBtYW51ZmFjdHVyZXI6MCwKICAgICAgICBtYW5kYW50OjAsCiAgICAgICAgaXNBY3RpdmU6J0pBJywKICAgICAgICBtYXJrMjotMSwKICAgICAgICBtYXJrMTotMQogICAgICB9CiAgICB9LAogIH0KfQoK"},{"version":3,"sources":["Search.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Search.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <v-main class=\"pa-0\" style=\"background: #f1f1f1\" >\n    <v-toolbar height=\"41px\">\n      <template v-if=\"searchingFor == 'var'\">\n        Variante auswählen\n      </template>\n      <template v-else>\n        Cross Seller auswählen\n      </template>\n    </v-toolbar>\n    <v-row  >\n      <v-col class=\"mt-5\" cols=\"2\" style=\"background:white;padding-right :0\">\n        <div  class=\"d-flex flex-column elevation-1\" style=\"width: 100%\">\n          <v-tabs\n              v-model=\"tabSearch\"\n              fixed-tabs\n          >\n            <v-tab>\n              Filter\n            </v-tab>\n            <v-tab>\n              Kategorie\n            </v-tab>\n          </v-tabs>\n          <template v-if=\"tabSearch == 0\">\n            <v-list-item>\n              <v-row>\n                <v-col cols=\"6\" >\n                  <v-btn color=\"primary\" class=\"w-100\" :disabled=\"loading.search\" @click=\"search()\">\n                    <div v-if=\"loading.search == false\">\n                      <v-icon>\n                        mdi-magnify\n                      </v-icon>\n                    </div>\n                    <v-progress-circular style=\"width: 24px;height: 24px\" v-else indeterminate>\n\n                    </v-progress-circular>\n                  </v-btn>\n                </v-col>\n                <v-col cols=\"6\">\n                  <v-btn color=\"orange\"  class=\"w-100\" style=\"color:white\" :disabled=\"loading.search\" @click=\"resetSearch()\">\n                    <div v-if=\"loading.search == false\">\n                      <v-icon>\n                        mdi-arrow-u-left-top\n                      </v-icon>\n                    </div>\n                    <v-progress-circular style=\"width: 24px;height: 24px\" v-else indeterminate>\n\n                    </v-progress-circular>\n                  </v-btn>\n                </v-col>\n              </v-row>\n            </v-list-item>\n            <v-list-item  v-if=\"searchFilter.categories.length > 0\">\n              <v-list-item-title>\n                <v-checkbox\n                    v-model=\"useCategories\"\n                    label=\"Mit Kategorien suchen\"\n                ></v-checkbox>\n              </v-list-item-title>\n            </v-list-item>\n            <v-list-item>\n              <v-list-item-title>\n                <v-text-field\n                    label=\"Artikel-Id\"\n                    hide-details=\"auto\"\n                    type=\"number\"\n                    @keydown.enter=\"search()\"\n                    v-model=\"searchFilter.itemId\"\n                >\n                </v-text-field>\n              </v-list-item-title>\n            </v-list-item>\n            <v-list-item>\n              <v-list-item-title>\n                <v-text-field\n                    label=\"Varianten-Id\"\n                    hide-details=\"auto\"\n                    type=\"number\"\n                    @keydown.enter=\"search()\"\n                    v-model=\"searchFilter.varId\"\n                >\n                </v-text-field>\n              </v-list-item-title>\n            </v-list-item>\n            <v-list-item>\n              <v-list-item-title>\n                <v-text-field\n                    label=\"Variantennummer\"\n                    hide-details=\"auto\"\n                    @keydown.enter=\"search()\"\n                    v-model=\"searchFilter.varNumber\"\n                >\n                </v-text-field>\n              </v-list-item-title>\n            </v-list-item>\n            <v-list-item>\n              <v-list-item-title>\n                <v-text-field\n                    label=\"Artikeldaten\"\n                    hide-details=\"auto\"\n                    type=\"text\"\n                    @keydown.enter=\"search()\"\n                    v-model=\"searchFilter.itemData\"\n                >\n                </v-text-field>\n              </v-list-item-title>\n            </v-list-item>\n            <v-list-item>\n              <v-list-item-title>\n                <v-select\n                    :items=\"manufacturer\"\n                    v-model=\"searchFilter.manufacturer\"\n                    label=\"Hersteller\"\n                    multiple\n                >\n                </v-select>\n              </v-list-item-title>\n            </v-list-item>\n            <v-list-item>\n              <v-list-item-title>\n                <v-select\n                    :items=\"mandanten\"\n                    v-model=\"searchFilter.mandant\"\n                    label=\"Mandant\"\n                    multiple\n                >\n                </v-select>\n              </v-list-item-title>\n            </v-list-item>\n            <v-list-item >\n              <v-list-item-title>\n                <v-select\n                    :items=\"selectItems.isActive\"\n                    v-model=\"searchFilter.isActive\"\n                    label=\"Aktiv\"\n                >\n                </v-select>\n              </v-list-item-title>\n            </v-list-item>\n            <v-list-item class=\"mb-3 mt-2\">\n              <v-select\n                  v-model=\"selectedTags\"\n                  :items=\"tags\"\n                  label=\"Tags\"\n                  multiple\n                  persistent-hint\n              >\n                <template   v-slot:item=\"{ item }\">\n                  <div>\n                    <v-badge\n                        class=\"ml-1\"\n                        left\n                        :color=\"item.color\"\n\n                    ></v-badge>\n                    <span  class=\"ml-1\"> {{ item.tagName }} </span>\n                  </div>\n                </template>\n                <template v-slot:selection=\"{ item ,index }\">\n                  <template v-if=\"selectedTags.length > 2 && index == 2\">\n                    <v-chip class=\"ml-4 my-3\">\n                      (+ {{ selectedTags.length-2 }} Other )\n                    </v-chip>\n                  </template>\n                  <template v-else-if=\"index < 2\">\n                    <div class=\"ml-4 my-3\">\n                      <v-badge\n                          class=\"ml-1\"\n                          left\n                          :color=\"item.color\"\n\n                      ></v-badge>\n                      <span  class=\"ml-1\"> {{ item.tagName }} </span>\n                    </div>\n                  </template>\n                </template>\n\n              </v-select>\n            </v-list-item>\n            <v-list-item>\n              <v-select\n                  v-model=\"searchFilter.mark1\"\n                  :items=\"mark1Items\"\n                  label=\"Markierung 1\"\n              >\n              </v-select>\n            </v-list-item>\n            <v-list-item>\n              <v-select\n                  v-model=\"searchFilter.mark2\"\n                  :items=\"mark2Items\"\n                  label=\"Markierung 2\"\n              >\n              </v-select>\n            </v-list-item>\n          </template>\n          <template v-else>\n            <v-row>\n              <v-col cols=\"12\" class=\"pa-5 pt-4\">\n                <v-btn color=\"orange\"  class=\"w-100\" style=\"color:white\" :disabled=\"loading.search\" @click=\"searchFilter.categories = []\">\n                  <div v-if=\"loading.search == false\">\n                    <v-icon>\n                      mdi-arrow-u-left-top\n                    </v-icon>\n                  </div>\n                  <v-progress-circular style=\"width: 24px;height: 24px\" v-else indeterminate>\n\n                  </v-progress-circular>\n                </v-btn>\n              </v-col>\n            </v-row>\n\n            <v-treeview\n                selectable\n                v-model=\"searchFilter.categories\"\n                hoverable\n                return-object\n                :items=\"categoryTree\"\n                open-on-click:true\n            ></v-treeview>\n          </template>\n        </div>\n      </v-col>\n      <v-col class=\"mt-2\" cols=\"10\">\n        <div class=\"loadingBackDrop\" v-if=\"loading.add == true\">\n          <v-progress-circular style=\"width: 200px;height: 200px;\" color=\"blue lighten--1 \" indeterminate>\n          </v-progress-circular>\n        </div>\n        <div  class=\"flex-fill\">\n          <v-data-table\n              @click:row=\"setCrossSeller($event)\"\n              :loading=\"loading.search\"\n              :headers=\"searchResultHeader\"\n              :disabled=\"loading.add\"\n              :options=\"searchOptions\"\n              :items=\"searchResults\"\n              :footer-props=\"{'items-per-page-options':[15, 50, 100]}\"\n              item-key=\"varId\"\n              v-model=\"selected\"\n              :server-items-length=\"searchResultsTotal\"\n              :item-class=\"setClassAlreadyCrossSeller\"\n              :show-select=\"searchingFor !== 'var'\"\n              v-on:update:options=\"search($event)\"\n          >\n\n            <template v-slot:top v-if=\"searchingFor !== 'var'\">\n              <v-btn color=\"success\" class=\"ma-2\" :disabled=\"selected.length <= 0\" @click=\"addNewCrossSeller(selected)\">\n                <v-icon>\n                  mdi-plus\n                </v-icon>\n                Cross Seller hinzufügen\n              </v-btn>\n            </template>\n            <template v-slot:item.image=\"{ item }\">\n              <v-avatar>\n                <img :src=\"item.image\" class=\"img-fluid\" style=\"height: 75px\">\n              </v-avatar>\n            </template>\n            <template v-slot:item.tags=\"{ item }\">\n              <template v-for=\"tag in item.tags\">\n                <div class=\"ml-4 my-3\" :key=\"item.varId +'_tag_'+tag.tagId\">\n                  <v-badge\n                      class=\"ml-1\"\n                      left\n                      :color=\"tag.tag.color\"\n                  ></v-badge>\n                  <span  class=\"ml-1\"> {{ tag.tag.tagName }} </span>\n                </div>\n              </template>\n            </template>\n          </v-data-table>\n        </div>\n      </v-col>\n    </v-row>\n    <v-snackbar\n        top\n        :color=\"alerts.search.type\"\n        :timeout=\"3000\"\n        elevation=\"15\"\n        v-model=\"alerts.search.isActive\"\n        right\n    >\n      {{ alerts.search.message }}\n    </v-snackbar>\n    <v-snackbar\n        top\n        right\n        elevation=\"15\"\n        :color=\"alerts.add.type\"\n        :timeout=\"3000\"\n        v-model=\"alerts.add.isActive\"\n    >\n      {{ alerts.add.message }}\n    </v-snackbar>\n    <v-snackbar\n        top\n        right\n        elevation=\"15\"\n        :color=\"alerts.delete.type\"\n        :timeout=\"3000\"\n        v-model=\"alerts.delete.isActive\"\n    >\n      {{ alerts.add.message }}\n    </v-snackbar>\n  </v-main>\n</template>\n<script>\nexport default {\n  name: 'Main',\n  data: () => ({\n    tabSearch:0,\n    searchOptions:{\n      page:1,\n      itemsPerPage:15,\n    },\n    selected:[],\n    alerts: {\n      add: {\n        message:'',\n        isActive:false,\n        type:''\n      },\n      search:{\n        message:'',\n        isActive:false,\n        type:''\n      },\n      delete:{\n        message:'',\n        isActive:false,\n        type:''\n      },\n    },\n    searchResultsTotal:0,\n    useCategories:true,\n    mark1Items:['',\"Ohne\",1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31],\n    mark2Items:['',\"Ohne\",1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11],\n    selectedTags:[],\n    searchResults:[],\n    searchFilter:\n        {\n          categories:[],\n          itemId:null,\n          varId:null,\n          varNumber:null,\n          itemData:'',\n          manufacturer:0,\n          mandant:0,\n          isActive:'JA',\n          mark1:-1,\n          mark2:-1\n        },\n    loading:{\n      search:false,\n      add:false\n    },\n    selectItems: {\n      manufacturer: [],\n      isActive:[\n        'ALLE',\n        'JA',\n        'NEIN'\n      ]\n    }, searchResultHeader: [\n      {\n        text:'',\n        sortable: false,\n        value:'image'\n      },\n      {\n        text: 'Varianten-Id',\n        sortable: true,\n        value: 'varId',\n      },\n      {\n        text: 'Artikel-Id',\n        sortable: true,\n        value: 'itemId',\n      },\n      {\n        text: 'Name',\n        sortable: false,\n        value: 'itemName',\n      },\n      {\n        text: 'tags',\n        sortable: false,\n        value: 'tags',\n      },\n      {\n        text:'Hersteller',\n        sortable: false,\n        value:'manufacturer'\n      }\n    ],\n  }),\n  computed:{\n      selectedVariation: function () {\n      return this.$store.state.selectedVariation;\n      } ,\n      manufacturerMap: function () {\n      return this.$store.state.manufacturerMap;\n      },\n      mandantMap: function () {\n      return this.$store.state.manufacturerMap;\n      },\n      tags: function () {\n        console.log(this.$store.state.tags)\n        return this.$store.state.tags;\n      },\n      crossSeller: function () {\n        return this.$store.state.crossSeller;\n      },\n      categoryTree: function () {\n        return this.$store.state.categoryTree;\n      },\n      searchingFor: function () {\n        return this.$store.state.searchingFor;\n      },\n      mandanten: function () {\n      return this.$store.state.mandanten;\n      },\n      manufacturer: function () {\n      return this.$store.state.manufacturer;\n      }\n\n\n\n  },\n  methods:\n  {\n    setCrossSeller(event)\n    {\n\n      if(this.searchingFor == 'var')\n      {\n        this.getCrossSellerById(event.varId)\n      }\n      else{\n        if(this.selected.includes(event))\n        {\n          this.selected.splice(this.selected.indexOf(event),1)\n        }\n        else\n        {\n          this.selected.push(event)\n        }\n      }\n\n    },\n    getCrossSellerById(varId)\n    {\n      let _self = this;\n\n      this.$store.commit('componentLoadingMessage','getting cross seller data');\n      this.$store.commit('componentLoading',true);\n\n      let crossSeller = [];\n\n      _self.$http.get( process.env.VUE_APP_GET_CROSSSELLER+varId+'/'+'de'+'/'+process.env.VUE_APP_PLUGIN_SET_PREVIEW).then((response) => {\n        if(response)\n        {\n          console.log('crossbyid',response)\n          let selectVar = response.data.selectedVar.data;\n\n          let image = '';\n\n          if(selectVar.images.variation.length > 0)\n          {\n            let varImages  = selectVar.images.variation[0];\n\n            if(varImages.urlPreview !== '')\n            {\n              image = varImages.urlPreview\n            }\n            else if(varImages.urlSecondPreview == '')\n            {\n              image = varImages.urlSecondPreview\n            }\n            else if(varImages.urlMiddle == '')\n            {\n              image = varImages.urlMiddle\n            }\n          }\n          else if(selectVar.images.all.length > 0)\n          {\n            let allImages  = selectVar.images.all[0];\n\n            if(allImages.urlPreview !== '')\n            {\n              image = allImages.urlPreview\n            }\n            else if(allImages.urlSecondPreview == '')\n            {\n              image = allImages.urlSecondPreview\n            }\n            else if(allImages.urlMiddle == '')\n            {\n              image = allImages.urlMiddle\n            }\n          }\n\n          let name  = '';\n\n          if(selectVar.texts.name1 !== \"N / A\")\n          {\n            name = selectVar.texts.name1\n          }\n          else if(selectVar.texts.name2 !== 'N / A')\n          {\n            name = selectVar.texts.name2\n          }\n          else if(selectVar.texts.name3 !== 'N / A')\n          {\n            name = selectVar.texts.name3\n          }\n          let manufacturer = '';\n\n          if(selectVar.filter.hasManufacturer !== false)\n          {\n            manufacturer = selectVar.item.manufacturer.name\n          }\n          _self.$store.commit('selectedVariation', {\n            attributes:selectVar.attributes,\n            itemId:selectVar.variation.itemId,\n            varId:selectVar.variation.id,\n            itemName:name,\n            manufacturer:manufacturer,\n            image:image,\n            externalId:selectVar.variation.externalId,\n            varNumber:selectVar.variation.number,\n            client:selectVar.ids.clients\n          })\n\n          if(response.data && response.data.vars.length > 0 )\n          {\n            for(let i = 0 ; i < response.data.vars.length ; i++)\n            {\n              let currentItemData = response.data.vars[i].data;\n\n              let image = '';\n\n              if(currentItemData.images.variation.length > 0)\n              {\n                let varImages  = currentItemData.images.variation[0];\n\n                if(varImages.urlPreview !== '')\n                {\n                  image = varImages.urlPreview\n                }\n                else if(varImages.urlSecondPreview == '')\n                {\n                  image = varImages.urlSecondPreview\n                }\n                else if(varImages.urlMiddle == '')\n                {\n                  image = varImages.urlMiddle\n                }\n              }\n              else if(currentItemData.images.all.length > 0)\n              {\n                let allImages  = currentItemData.images.all[0];\n\n                if(allImages.urlPreview !== '')\n                {\n                  image = allImages.urlPreview\n                }\n                else if(allImages.urlSecondPreview == '')\n                {\n                  image = allImages.urlSecondPreview\n                }\n                else if(allImages.urlMiddle == '')\n                {\n                  image = allImages.urlMiddle\n                }\n              }\n\n              let name  = '';\n\n              if(currentItemData.texts.name1 !== \"N / A\")\n              {\n                name = currentItemData.texts.name1\n              }\n              else if(currentItemData.texts.name2 !== 'N / A')\n              {\n                name = currentItemData.texts.name2\n              }\n              else if(currentItemData.texts.name3 !== 'N / A')\n              {\n                name = currentItemData.texts.name3\n              }\n\n              let manufacturer = '';\n\n              if(currentItemData.filter.hasManufacturer !== false)\n              {\n                manufacturer = currentItemData.item.manufacturer.name\n              }\n\n              let object = {\n                itemId:currentItemData.variation.itemId,\n                varId:response.data.vars[i].id,\n                itemName:name,\n                manufacturer:manufacturer,\n                image:image,\n                position:response.data.vars[i].position,\n                externalId:currentItemData.variation.externalId,\n                varNumber:currentItemData.variation.number,\n                client:currentItemData.ids.clients,\n                attributes:currentItemData.attributes\n              }\n              crossSeller.push(object)\n            }\n\n          }\n        }\n\n        _self.$store.commit('crossSeller',crossSeller)\n        _self.$store.commit('componentLoading',false);\n\n        _self.$router.push({path: '/CrossSeller/'+varId})\n\n      }).catch((error) => {\n        _self.$store.commit('componentLoading',false);\n        console.log(error)\n        // _self.myAlerts.error = true;\n        // _self.myAlerts.errorMessage = error\n        // _self.resetErorr();\n      })\n\n    },\n\n    addNewCrossSeller(vars)\n    {\n      let _self = this;\n\n      _self.loading.add = true;\n\n      let data = {\n        addTo:{\n          varId:_self.selectedVariation.varId,\n          itemId:_self.selectedVariation.itemId,\n          itemName:_self.selectedVariation.itemName,\n          manufacturer:_self.selectedVariation.manufacturer,\n          externalVarId:_self.selectedVariation.externalId,\n          varNumber:_self.selectedVariation.varNumber,\n          client:_self.selectedVariation.client\n        },\n        toAdd:[]\n      }\n\n      let highestPos = 0;\n\n      for(let i = 0 ; i <  _self.crossSeller.length ; i++)\n      {\n        if(_self.crossSeller[i].position > highestPos)\n        {\n          highestPos = _self.crossSeller[i].position;\n        }\n      }\n\n      console.log('addNewCrossSeller',vars)\n\n      for(let i = 0; i < vars.length; i++)\n      {\n        data.toAdd.push(\n            {\n              varId:vars[i].varId,\n              position:highestPos+1\n            }\n        )\n\n        vars[i].position = highestPos+1;\n\n        highestPos++;\n      }\n\n      _self.$http.post( process.env.VUE_APP_ADD_CROSSSELLER+process.env.VUE_APP_PLUGIN_SET_PREVIEW,data).then((response) => {\n        if(response)\n        {\n          _self.mainTabs = 1;\n          _self.alerts.add.isActive = true;\n          _self.loading.add = false;\n          _self.alerts.add.type = 'success';\n          _self.alerts.add.message = \"Cross Seller wurden erfolgreich verknüpft\"\n          _self.getCrossSellerById(_self.selectedVariation.varId)\n        }\n      }).catch((error) => {\n        _self.loading.add = false;\n        _self.alerts.add.type = 'error';\n        _self.alerts.add.isActive = true;\n        _self.alerts.add.message = \"Cross Seller konnten nicht verknüpft werden\"\n        // _self.myAlerts.error = true;\n        // _self.myAlerts.errorMessage = error\n        // _self.resetErorr();\n      })\n    },\n    setClassAlreadyCrossSeller(item)\n    {\n      if(this.alreadyCrossSeller(item.varId) == true && this.searchingFor !== 'var'  ||  item.varId == this.selectedVariation.varId)\n      {\n        return 'alreadyCrossSeller'\n      }\n      else{\n        return ''\n      }\n    },\n    alreadyCrossSeller(varId)\n    {\n      for(let i = 0; i < this.crossSeller.length; i++)\n      {\n        if(varId == this.crossSeller[i].varId)\n        {\n          return true;\n        }\n      }\n      return false;\n    },\n    search(event = {}) {\n      let _self = this;\n\n      if (event !== {}) {\n        _self.searchOptions.page = event.page;\n        _self.searchOptions.itemsPerPage = event.itemsPerPage;\n      }\n\n      _self.loading.search = true;\n\n      let data = {\n        with: 'additionalSkus,attributeValues.attribute,attributeValues.attributeValue,barcodes.barcode,base.item,base.itemSerialNumber,base.feedback,base.characteristics,base.crossSelling,base.texts,base.availability,base.images,base.stock,base.stockStorageLocations,bundleComponents,categories.category,categories.categoryBranch,clients,defaultCategories.category,images.image,markets,marketIdentNumbers,salesPrices.salesPrice,skus,supplier.supplier,timestamps,warehouses.warehouse,unit.unit,tags.tag,base.shippingProfiles,comments,inheritance',\n        page: _self.searchOptions.page,\n        itemsPerPage: _self.searchOptions.itemsPerPage\n      }\n\n\n      if (_self.searchFilter.categories.length > 0 && _self.useCategories == true) {\n        let catIds = [];\n        for (let i = 0; i < _self.searchFilter.categories.length; i++) {\n          catIds.push(_self.searchFilter.categories[i].id)\n        }\n        catIds = catIds.toString()\n\n        data.categoryIds = 'in:' + catIds\n      }\n      if (_self.searchFilter.varId > 0) {\n        data.ids = 'in:' + _self.searchFilter.varId\n      }\n      if (_self.searchFilter.varNumber > 0) {\n        data.number = 'like:' + _self.searchFilter.varNumber\n      }\n      if (_self.searchFilter.itemId > 0) {\n        data.itemIds = 'in:' + _self.searchFilter.itemId\n      }\n      if (_self.searchFilter.mandant.length > 0) {\n        if (_self.searchFilter.mandant.length == 1) {\n          data.clientIds = 'in:' + _self.mandantMap[_self.searchFilter.mandant]\n        } else {\n          data.clientIds = 'in:'\n          for (let i = 0; i < _self.searchFilter.mandant.length; i++) {\n            if (i + 1 == _self.searchFilter.mandant.length) {\n              data.clientIds = data.clientIds + _self.mandantMap[_self.searchFilter.mandant[i]]\n            } else {\n              data.clientIds = data.clientIds + _self.mandantMap[_self.searchFilter.mandant[i]] + ','\n            }\n          }\n        }\n      }\n      if (_self.selectedTags.length > 0) {\n        data.tagIds = 'in:' + _self.selectedTags.toString()\n      }\n      if (_self.searchFilter.itemData.length > 0) {\n        data.query = _self.searchFilter.itemData\n      }\n      if (_self.searchFilter.manufacturer.length > 0) {\n        data.anyManufacturerId = []\n        for (let i = 0; i < _self.searchFilter.manufacturer.length; i++) {\n          data.anyManufacturerId.push(_self.manufacturerMap[_self.searchFilter.manufacturer[i]])\n        }\n      }\n      if (_self.searchFilter.isActive !== 'ALLE') {\n        if (_self.searchFilter.isActive == 'JA') {\n          data.isActive = true;\n        } else if (_self.searchFilter.isActive == 'NEIN') {\n          data.isActive = false;\n        }\n      }\n      if (_self.searchFilter.mark2 == \"Ohne\") {\n        data.flag2 = 'in:0'\n      } else if (_self.searchFilter.mark2 > -1) {\n        data.flag2 = 'in:' + _self.searchFilter.mark2;\n      }\n      if (_self.searchFilter.mark1 == \"Ohne\") {\n        data.flag1 = 'in:0'\n      } else if (_self.searchFilter.mark1 > -1) {\n        data.flag1 = 'in:' + _self.searchFilter.mark1;\n      }\n      _self.$http.get(process.env.VUE_APP_GET_VARIATIONS, {params: data}).then((response) => {\n\n        let replaceTable = []\n\n        if (response && response.data && response.data[\"entries\"].length > 0) {\n          let data = response.data;\n\n          _self.searchResultsTotal = data.totalsCount;\n\n          for (let i = 0; i < data[\"entries\"].length; i++) {\n            let image = ''\n            if (data[\"entries\"][i].base.images.length > 0) {\n              image = data[\"entries\"][i].base.images[0].urlPreview\n            }\n\n            let name = '';\n            if (data[\"entries\"][i].base.texts.length > 0) {\n\n              name = data[\"entries\"][i].base.texts[0].name\n            }\n\n            let manufacturer = ''\n\n            for (let [key, value] of Object.entries(_self.manufacturerMap)) {\n              if (value == data[\"entries\"][i].base.item.manufacturerId) {\n                manufacturer = key;\n              }\n\n            }\n            let clients = []\n\n            for (let [key, value] of Object.entries(_self.mandantMap)) {\n              for (let a = 0; a < data[\"entries\"][i].clients.length; a++) {\n                if (value == data[\"entries\"][i].clients[a]) {\n                  clients.push(value);\n                }\n              }\n            }\n\n            let object = {\n              itemId: data[\"entries\"][i].base.itemId,\n              varId: data[\"entries\"][i].id,\n              manufacturer: manufacturer,\n              attributes: data[\"entries\"][i].attributeValues,\n              image: image,\n              itemName: name,\n              externalId: data[\"entries\"][i].base.externalId,\n              client: clients,\n              tags: data[\"entries\"][i].tags,\n              varNumber: data[\"entries\"][i].base.number,\n              isSelectable: (!_self.alreadyCrossSeller(data[\"entries\"][i].id) && data[\"entries\"][i].id !== _self.selectedVariation.varId) || (_self.searchingFor == 'var' && data[\"entries\"][i].id !== _self.selectedVariation.varId)\n            }\n\n            replaceTable.push(object)\n\n            _self.loading.search = false;\n            _self.searchResults = replaceTable\n          }\n\n        } else {\n          _self.loading.search = false;\n          _self.searchResults = replaceTable\n        }\n      }).catch((error) => {\n        console.log(error)\n\n        _self.loading.search = false;\n        _self.searchResults = [];\n\n        _self.alerts.search.isActive = true;\n        _self.alerts.search.message = \"Suche fehlgeschlagen\"\n        _self.alerts.search.type = \"error\"\n        // _self.myAlerts.error = true;\n        // _self.myAlerts.errorMessage = error\n        // _self.resetErorr();\n      })\n    },\n    resetSearch()\n    {\n      this.selected = [];\n      this.searchResults = [];\n      this.searchFilter = {\n        categories:[],\n        itemId:null,\n        varId:null,\n        varNumber:null,\n        itemData:'',\n        manufacturer:0,\n        mandant:0,\n        isActive:'JA',\n        mark2:-1,\n        mark1:-1\n      }\n    },\n  }\n}\n\n</script>"]}]}